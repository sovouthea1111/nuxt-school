import{k as M}from"./DIz7m-9I.js";import{u as b}from"./CuQSOrhc.js";import{u as E}from"./B5aj7jcg.js";function g(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function y(){const e=b("grades",()=>[]),o=M(!1);if(!o.value){const t=localStorage.getItem("grades");if(t)e.value=JSON.parse(t);else{const{students:a}=E(),n=["Mathematics","Khmer","Science"],i=["Midterm","Final"],r=new Date,u=[];a.value.slice(0,5).forEach((p,c)=>{n.forEach((x,d)=>{i.forEach((D,l)=>{const f=new Date(r);f.setDate(r.getDate()-(d+l+c));const w=60+(c*7+d*9+l*11)%40,O=Math.min(100,Math.max(0,w));u.push({id:g(),studentId:p.id,subject:x,exam:D,score:O,date:f.toISOString()})})})}),e.value=u,localStorage.setItem("grades",JSON.stringify(e.value))}o.value=!0}function s(){localStorage.setItem("grades",JSON.stringify(e.value))}function m(){return e.value}function S(t){return e.value.find(a=>a.id===t)}function v(t){e.value.push({id:g(),...t,date:new Date(t.date).toISOString()}),s()}function I(t,a){const n=e.value.findIndex(i=>i.id===t);n!==-1&&(e.value[n]={id:t,...a,date:new Date(a.date).toISOString()},s())}function h(t){const a=e.value.findIndex(n=>n.id===t);a!==-1&&(e.value.splice(a,1),s())}return{grades:e,list:m,getById:S,create:v,update:I,remove:h}}export{y as u};
