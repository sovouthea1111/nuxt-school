import{g as D,k as m,j as w,c as u,a as t,l as p,v,m as V,F as x,r as F,o as d,t as r,y as L}from"./DIz7m-9I.js";import{u as U}from"./B5aj7jcg.js";import{u as B}from"./BIr8MjRS.js";import"./CuQSOrhc.js";const I={class:"card"},N={class:"toolbar"},T={class:"table"},A={class:"badge"},j={class:"actions"},q=["onClick"],E={key:0},J=D({__name:"history",setup(G){const{students:b}=U(),{records:_,remove:g}=B(),o=m(""),a=m(""),l=m("");function c(s){return b.value.find(e=>e.id===s)}const f=w(()=>{const s=o.value.trim().toLowerCase();return _.value.filter(e=>{const n=c(e.studentId)?.name.toLowerCase()||"",i=e.date.slice(0,10),C=!a.value||i>=a.value,h=!l.value||i<=l.value,S=!s||n.includes(s);return C&&h&&S}).sort((e,n)=>e.date.localeCompare(n.date))});function k(){o.value="",a.value="",l.value=""}function y(s){return new Date(s).toLocaleDateString()}return(s,e)=>(d(),u("section",I,[t("div",N,[p(t("input",{class:"date",type:"date","onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n)},null,512),[[v,a.value]]),p(t("input",{class:"date",type:"date","onUpdate:modelValue":e[1]||(e[1]=n=>l.value=n)},null,512),[[v,l.value]]),p(t("input",{class:"input","onUpdate:modelValue":e[2]||(e[2]=n=>o.value=n),placeholder:"Search student name"},null,512),[[v,o.value]]),e[3]||(e[3]=t("div",{class:"spacer"},null,-1)),t("button",{class:"btn secondary",onClick:k},"Clear")]),t("table",T,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",null,"Date"),t("th",null,"Student"),t("th",null,"Grade"),t("th",null,"Status"),t("th",{class:"actions"},"Actions")])],-1)),t("tbody",null,[(d(!0),u(x,null,F(f.value,n=>(d(),u("tr",{key:n.id},[t("td",null,r(y(n.date)),1),t("td",null,r(c(n.studentId)?.name||"Unknown"),1),t("td",null,r(c(n.studentId)?.grade||"-"),1),t("td",null,[t("span",A,r(n.status),1)]),t("td",j,[t("button",{class:"btn danger",onClick:i=>L(g)(n.id)},"Delete",8,q)])]))),128)),f.value.length===0?(d(),u("tr",E,[...e[4]||(e[4]=[t("td",{colspan:"5",class:"muted"},"No attendance records",-1)])])):V("",!0)])])]))}});export{J as default};
