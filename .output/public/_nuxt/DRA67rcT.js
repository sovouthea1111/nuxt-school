import{B as g,C as m,m as S,z as p}from"./BJwfoTqO.js";const v="$s";function D(...e){const u=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(u);const[n,a]=e;if(!n||typeof n!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+n);if(a!==void 0&&typeof a!="function")throw new Error("[nuxt] [useState] init must be a function: "+a);const s=v+n,d=g(),o=m(d.payload.state,s);if(o.value===void 0&&a){const r=a();if(S(r))return d.payload.state[s]=r,r;o.value=r}return o}function y(){return[{id:f(),name:"Sophea Chan",gender:"Female",grade:"Grade 3",age:9,guardian:"Chan Dara",enrollmentDate:new Date("2023-10-01").toISOString(),address:"Phnom Penh"},{id:f(),name:"Vannak Sok",gender:"Male",grade:"Grade 2",age:8,guardian:"Sok Lina",enrollmentDate:new Date("2024-01-15").toISOString(),address:"Siem Reap"},{id:f(),name:"Sreyneang Kim",gender:"Female",grade:"Grade 1",age:7,guardian:"Kim Phalla",enrollmentDate:new Date("2024-05-20").toISOString(),address:"Battambang"}]}function f(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function w(){const e=D("students",()=>[]),u=p(!1);if(!u.value){const t=localStorage.getItem("students");e.value=t?JSON.parse(t):y(),u.value=!0}function n(){localStorage.setItem("students",JSON.stringify(e.value))}function a(){return e.value}function s(t){return e.value.find(i=>i.id===t)}function d(t){e.value.push({id:f(),...t,enrollmentDate:new Date(t.enrollmentDate).toISOString()}),n()}function o(t,i){const l=e.value.findIndex(c=>c.id===t);l!==-1&&(e.value[l]={id:t,...i,enrollmentDate:new Date(i.enrollmentDate).toISOString()},n())}function r(t){const i=e.value.findIndex(l=>l.id===t);i!==-1&&(e.value.splice(i,1),n())}return{students:e,list:a,getById:s,create:d,update:o,remove:r}}export{w as u};
