import{g as y,q as f,j as D,s as b,c as S,o as g,a as t,l as o,m as V,v as r,C as I,B as w,k as x}from"./DIz7m-9I.js";import{u as j}from"./CuQSOrhc.js";const C={class:"form-grid"},k={class:"field"},O={key:0,class:"error"},B={class:"field"},N={class:"field"},P={class:"field"},U={class:"field"},M={class:"field",style:{"grid-column":"1 / -1"}},T={class:"toolbar"},H=y({__name:"TeacherForm",props:{modelValue:{}},emits:["update:model-value","submit","cancel"],setup(a,{emit:u}){const i=a,d=u,s=f({...i.modelValue}),m=f({name:D(()=>s.name.trim().length>0)});b(()=>i.modelValue,n=>{Object.assign(s,n)}),b(s,n=>{d("update:model-value",{...n})},{deep:!0});function c(){d("submit")}return(n,e)=>(g(),S("form",{onSubmit:w(c,["prevent"])},[t("div",C,[e[13]||(e[13]=t("div",{style:{"grid-column":"1 / -1"}},[t("div",{class:"section-title"},"Profile")],-1)),t("div",k,[e[7]||(e[7]=t("label",{class:"label"},"Name",-1)),o(t("input",{class:I(["input",{invalid:!m.name}]),"onUpdate:modelValue":e[0]||(e[0]=l=>s.name=l),placeholder:"Teacher full name"},null,2),[[r,s.name]]),m.name?V("",!0):(g(),S("div",O,"Name is required"))]),t("div",B,[e[8]||(e[8]=t("label",{class:"label"},"Subject",-1)),o(t("input",{class:"input","onUpdate:modelValue":e[1]||(e[1]=l=>s.subject=l),placeholder:"Subject taught"},null,512),[[r,s.subject]])]),t("div",N,[e[9]||(e[9]=t("label",{class:"label"},"Phone",-1)),o(t("input",{class:"input","onUpdate:modelValue":e[2]||(e[2]=l=>s.phone=l),placeholder:"Primary phone"},null,512),[[r,s.phone]])]),t("div",P,[e[10]||(e[10]=t("label",{class:"label"},"Email",-1)),o(t("input",{class:"input",type:"email","onUpdate:modelValue":e[3]||(e[3]=l=>s.email=l),placeholder:"Primary email"},null,512),[[r,s.email]])]),e[14]||(e[14]=t("div",{style:{"grid-column":"1 / -1"}},[t("div",{class:"section-title"},"Employment")],-1)),t("div",U,[e[11]||(e[11]=t("label",{class:"label"},"Hire Date",-1)),o(t("input",{class:"date",type:"date","onUpdate:modelValue":e[4]||(e[4]=l=>s.hireDate=l)},null,512),[[r,s.hireDate]])]),t("div",M,[e[12]||(e[12]=t("label",{class:"label"},"Address",-1)),o(t("input",{class:"input","onUpdate:modelValue":e[5]||(e[5]=l=>s.address=l),placeholder:"City or district"},null,512),[[r,s.address]])])]),t("div",T,[e[15]||(e[15]=t("button",{class:"btn",type:"submit"},"Save",-1)),t("button",{class:"btn secondary",type:"button",onClick:e[6]||(e[6]=l=>d("cancel"))},"Cancel")])],32))}});function E(){return[{id:v(),name:"Sokha Hun",subject:"Mathematics",phone:"012345678",email:"sokha@example.com",hireDate:new Date("2022-09-01").toISOString(),address:"Phnom Penh"},{id:v(),name:"Borey Chhim",subject:"Khmer",phone:"098765432",email:"borey@example.com",hireDate:new Date("2023-01-10").toISOString(),address:"Siem Reap"}]}function v(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function J(){const a=j("teachers",()=>[]),u=x(!1);if(!u.value){const e=localStorage.getItem("teachers");a.value=e?JSON.parse(e):E(),u.value=!0}function i(){localStorage.setItem("teachers",JSON.stringify(a.value))}function d(){return a.value}function s(e){return a.value.find(l=>l.id===e)}function m(e){a.value.push({id:v(),...e,hireDate:new Date(e.hireDate).toISOString()}),i()}function c(e,l){const p=a.value.findIndex(h=>h.id===e);p!==-1&&(a.value[p]={id:e,...l,hireDate:new Date(l.hireDate).toISOString()},i())}function n(e){const l=a.value.findIndex(p=>p.id===e);l!==-1&&(a.value.splice(l,1),i())}return{teachers:a,list:d,getById:s,create:m,update:c,remove:n}}export{H as _,J as u};
