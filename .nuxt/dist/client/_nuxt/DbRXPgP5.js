import{g as y,q as f,j as V,s as b,c as g,o as S,B as h,a as t,l as c,m as C,v as m,C as x,k as M}from"./DIz7m-9I.js";import{u as N}from"./CuQSOrhc.js";const k={class:"form-grid"},B={class:"field"},I={key:0,class:"error"},w={class:"field"},H={class:"field"},T={class:"field",style:{"grid-column":"1 / -1"}},U={class:"toolbar"},q=y({__name:"SubjectForm",props:{modelValue:{}},emits:["update:model-value","submit","cancel"],setup(l,{emit:u}){const a=l,o=u,n=f({...a.modelValue}),d=f({name:V(()=>n.name.trim().length>0)});b(()=>a.modelValue,i=>{Object.assign(n,i)}),b(n,i=>{o("update:model-value",{...i})},{deep:!0});function p(){o("submit")}return(i,e)=>(S(),g("form",{onSubmit:h(p,["prevent"])},[t("div",k,[e[9]||(e[9]=t("div",{style:{"grid-column":"1 / -1"}},[t("div",{class:"section-title"},"Subject")],-1)),t("div",B,[e[5]||(e[5]=t("label",{class:"label"},"Name",-1)),c(t("input",{class:x(["input",{invalid:!d.name}]),"onUpdate:modelValue":e[0]||(e[0]=s=>n.name=s),placeholder:"Subject name"},null,2),[[m,n.name]]),d.name?C("",!0):(S(),g("div",I,"Name is required"))]),t("div",w,[e[6]||(e[6]=t("label",{class:"label"},"Code",-1)),c(t("input",{class:"input","onUpdate:modelValue":e[1]||(e[1]=s=>n.code=s),placeholder:"e.g., MATH"},null,512),[[m,n.code]])]),t("div",H,[e[7]||(e[7]=t("label",{class:"label"},"Teacher",-1)),c(t("input",{class:"input","onUpdate:modelValue":e[2]||(e[2]=s=>n.teacher=s),placeholder:"Assigned teacher"},null,512),[[m,n.teacher]])]),t("div",T,[e[8]||(e[8]=t("label",{class:"label"},"Description",-1)),c(t("input",{class:"input","onUpdate:modelValue":e[3]||(e[3]=s=>n.description=s),placeholder:"Short description"},null,512),[[m,n.description]])])]),t("div",U,[e[10]||(e[10]=t("button",{class:"btn",type:"submit"},"Save",-1)),t("button",{class:"btn secondary",type:"button",onClick:e[4]||(e[4]=s=>o("cancel"))},"Cancel")])],32))}});function A(){return[{id:v(),name:"Mathematics",code:"MATH",description:"Numbers and operations",teacher:"Sokha Hun"},{id:v(),name:"Khmer",code:"KHMR",description:"Language and literature",teacher:"Borey Chhim"}]}function v(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function z(){const l=N("subjects",()=>[]),u=M(!1);if(!u.value){const e=localStorage.getItem("subjects");l.value=e?JSON.parse(e):A(),u.value=!0}function a(){localStorage.setItem("subjects",JSON.stringify(l.value))}function o(){return l.value}function n(e){return l.value.find(s=>s.id===e)}function d(e){l.value.push({id:v(),...e}),a()}function p(e,s){const r=l.value.findIndex(j=>j.id===e);r!==-1&&(l.value[r]={id:e,...s},a())}function i(e){const s=l.value.findIndex(r=>r.id===e);s!==-1&&(l.value.splice(s,1),a())}return{subjects:l,list:o,getById:n,create:d,update:p,remove:i}}export{q as _,z as u};
