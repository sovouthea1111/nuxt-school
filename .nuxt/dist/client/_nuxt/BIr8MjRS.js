import{k as D}from"./DIz7m-9I.js";import{u as h}from"./CuQSOrhc.js";import{u as w}from"./B5aj7jcg.js";function r(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function y(){const t=h("attendance",()=>[]),u=D(!1);if(!u.value){const e=localStorage.getItem("attendance");if(e)t.value=JSON.parse(e);else{const{students:n}=w(),a=new Date,d=[];for(let s=0;s<5;s++){const l=new Date(a);l.setDate(a.getDate()-s);const I=l.toISOString();n.value.forEach((g,m)=>{const c=(m+s)%10,p=c<7?"Present":c<9?"Late":"Absent";d.push({id:r(),studentId:g.id,date:I,status:p})})}t.value=d,localStorage.setItem("attendance",JSON.stringify(t.value))}u.value=!0}function o(){localStorage.setItem("attendance",JSON.stringify(t.value))}function f(){return t.value}function i(e){const n=t.value.findIndex(a=>a.studentId===e.studentId&&a.date.slice(0,10)===e.date.slice(0,10));n!==-1?t.value[n]={...t.value[n],...e}:t.value.push({id:r(),...e}),o()}function v(e,n){n.forEach(a=>i({studentId:a.studentId,date:new Date(e).toISOString(),status:a.status}))}function S(e){const n=t.value.findIndex(a=>a.id===e);n!==-1&&(t.value.splice(n,1),o())}return{records:t,list:f,upsert:i,bulkMark:v,remove:S}}export{y as u};
