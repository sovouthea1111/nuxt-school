import{u as D}from"./B5aj7jcg.js";import{u as M}from"./BIr8MjRS.js";import{u as A}from"./D9vpsezn.js";import{g as j,j as h,c,o,a as s,F as v,r as _,t as n,n as m,_ as E}from"./DIz7m-9I.js";import"./CuQSOrhc.js";const B={class:"grid",style:{"grid-template-columns":"repeat(2, minmax(0, 1fr))"}},C={class:"card"},F={class:"chart"},G={class:"chart-label"},I={class:"chart-bar"},L={class:"chart-value"},z={class:"card"},N={class:"chart"},O={class:"chart-label"},P={class:"chart-bar"},R={class:"chart-value"},V={class:"card"},q={class:"chart"},H={class:"chart-label"},J={class:"chart-bar"},K={class:"chart-value"},Q=j({__name:"index",setup(T){const{students:b}=D(),{records:y}=M(),{grades:g}=A(),w=h(()=>{const r=new Map;b.value.forEach(e=>r.set(e.grade,(r.get(e.grade)||0)+1));const a=Array.from(r.entries()).map(([e,l])=>({label:e,value:l})),t=Math.max(1,...a.map(e=>e.value));return a.sort((e,l)=>e.label.localeCompare(l.label)).map(e=>({...e,pct:Math.round(e.value/t*100)}))}),x=h(()=>{const a=new Date,t=[];for(let e=6;e>=0;e--){const l=new Date(a);l.setDate(a.getDate()-e);const i=l.toISOString().slice(0,10),d=y.value.filter(u=>u.date.slice(0,10)===i),p=d.length,k=d.filter(u=>u.status==="Present").length,f=p?Math.round(k/p*100):0;t.push({label:i.slice(5),value:f,pct:f})}return t}),S=h(()=>{const r=new Map;return g.value.forEach(t=>{const e=r.get(t.subject)||[];e.push(t.score),r.set(t.subject,e)}),Array.from(r.entries()).map(([t,e])=>{const l=e.length?Math.round(e.reduce((i,d)=>i+d,0)/e.length):0;return{label:t,value:l}}).sort((t,e)=>e.value-t.value).map(t=>({...t,pct:t.value}))});return(r,a)=>(o(),c("div",B,[s("section",C,[a[0]||(a[0]=s("h2",{class:"title"},"Students by Grade",-1)),s("div",F,[(o(!0),c(v,null,_(w.value,t=>(o(),c("div",{key:t.label,class:"chart-row"},[s("div",G,n(t.label),1),s("div",I,[s("div",{class:"chart-fill",style:m({width:t.pct+"%"})},null,4)]),s("div",L,n(t.value),1)]))),128))])]),s("section",z,[a[1]||(a[1]=s("h2",{class:"title"},"Attendance Last 7 Days",-1)),s("div",N,[(o(!0),c(v,null,_(x.value,t=>(o(),c("div",{key:t.label,class:"chart-row"},[s("div",O,n(t.label),1),s("div",P,[s("div",{class:"chart-fill",style:m({width:t.pct+"%"})},null,4)]),s("div",R,n(t.value)+"%",1)]))),128))])]),s("section",V,[a[2]||(a[2]=s("h2",{class:"title"},"Exam Averages by Subject",-1)),s("div",q,[(o(!0),c(v,null,_(S.value,t=>(o(),c("div",{key:t.label,class:"chart-row"},[s("div",H,n(t.label),1),s("div",J,[s("div",{class:"chart-fill",style:m({width:t.pct+"%"})},null,4)]),s("div",K,n(t.value),1)]))),128))])])]))}}),$=E(Q,[["__scopeId","data-v-6f18fe63"]]);export{$ as default};
