import{g as A,k as s,j as L,q as _,c,a as e,b as d,l as q,v as F,m as I,F as J,r as O,w as b,o as u,t as i,y as C}from"./DIz7m-9I.js";import{_ as k}from"./Kk_-GCaK.js";import{u as T,_ as S}from"./DbRXPgP5.js";import"./CuQSOrhc.js";const z={class:"card"},G={class:"toolbar"},H={class:"table"},K={class:"badge"},P={class:"actions"},Q=["onClick"],R=["onClick"],W={key:0},ne=A({__name:"index",setup(X){const{subjects:g,create:j,update:U,remove:$,getById:w}=T(),r=s(""),h=L(()=>{const n=r.value.trim().toLowerCase();return g.value.filter(t=>{const o=`${t.name} ${t.code} ${t.teacher} ${t.description}`.toLowerCase();return!n||o.includes(n)})}),m=s(!1),p=s(!1),f=s(null);let v=_({name:"",code:"SUBJ",description:"",teacher:""}),a=_({name:"",code:"SUBJ",description:"",teacher:""});function y(){m.value=!0}function x(n){const t=w(n);t&&(f.value=n,a.name=t.name,a.code=t.code,a.description=t.description,a.teacher=t.teacher,p.value=!0)}function l(){m.value=!1,p.value=!1}function B(n){Object.assign(v,n)}function E(n){Object.assign(a,n)}function V(){j({...v}),l()}function D(){f.value&&(U(f.value,{...a}),l())}function N(n){$(n)}return(n,t)=>(u(),c("section",z,[e("div",G,[q(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),class:"input",placeholder:"Search name, code or teacher"},null,512),[[F,r.value]]),t[1]||(t[1]=e("div",{class:"spacer"},null,-1)),e("button",{class:"btn",onClick:y},"Add Subject")]),e("table",H,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Code"),e("th",null,"Teacher"),e("th",null,"Description"),e("th",{class:"actions"},"Actions")])],-1)),e("tbody",null,[(u(!0),c(J,null,O(h.value,o=>(u(),c("tr",{key:o.id},[e("td",null,i(o.name),1),e("td",null,[e("span",K,i(o.code),1)]),e("td",null,i(o.teacher),1),e("td",null,i(o.description),1),e("td",P,[e("button",{class:"btn secondary",onClick:M=>x(o.id)},"Edit",8,Q),e("button",{class:"btn danger",onClick:M=>N(o.id)},"Delete",8,R)])]))),128)),h.value.length===0?(u(),c("tr",W,[...t[2]||(t[2]=[e("td",{colspan:"5",class:"muted"},"No subjects found",-1)])])):I("",!0)])]),d(k,{open:m.value,title:"Add Subject",onClose:l},{default:b(()=>[d(S,{"model-value":C(v),"onUpdate:modelValue":B,onSubmit:V,onCancel:l},null,8,["model-value"])]),_:1},8,["open"]),d(k,{open:p.value,title:"Edit Subject",onClose:l},{default:b(()=>[d(S,{"model-value":C(a),"onUpdate:modelValue":E,onSubmit:D,onCancel:l},null,8,["model-value"])]),_:1},8,["open"])]))}});export{ne as default};
