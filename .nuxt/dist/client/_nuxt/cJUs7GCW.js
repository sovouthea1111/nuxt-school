import{g as O,k as d,j as A,q as C,c as u,a as t,b as r,l as q,v as F,m as T,F as z,r as H,w as x,o as c,t as l,y as S}from"./DIz7m-9I.js";import{_ as j}from"./Kk_-GCaK.js";import{_ as k}from"./DdxCUERA.js";import{u as J}from"./D9vpsezn.js";import{u as K}from"./B5aj7jcg.js";import"./CuQSOrhc.js";const P={class:"card"},Q={class:"toolbar"},R={class:"table"},W={class:"badge"},X={class:"actions"},Y=["onClick"],Z=["onClick"],ee={key:0},ue=O({__name:"index",setup(te){const{grades:w,create:D,update:I,remove:M,getById:$}=J(),{students:i}=K();function _(n){return i.value.find(e=>e.id===n)?.name||"Unknown"}const m=d(""),h=A(()=>{const n=m.value.trim().toLowerCase();return w.value.filter(e=>{const a=`${_(e.studentId)} ${e.subject} ${e.exam} ${e.score}`.toLowerCase();return!n||a.includes(n)}).sort((e,a)=>a.date.localeCompare(e.date))}),f=d(!1),p=d(!1),v=d(null);let b=C({studentId:i.value[0]?.id||"",subject:"Mathematics",exam:"Midterm",score:80,date:new Date().toISOString().slice(0,10)}),s=C({studentId:i.value[0]?.id||"",subject:"Mathematics",exam:"Midterm",score:80,date:new Date().toISOString().slice(0,10)});function y(){f.value=!0}function E(n){const e=$(n);e&&(v.value=n,s.studentId=e.studentId,s.subject=e.subject,s.exam=e.exam,s.score=e.score,s.date=e.date.slice(0,10),p.value=!0)}function o(){f.value=!1,p.value=!1}function U(n){Object.assign(b,n)}function V(n){Object.assign(s,n)}function g(){D({...b}),o()}function N(){v.value&&(I(v.value,{...s}),o())}function B(n){M(n)}function G(n){return new Date(n).toLocaleDateString()}return(n,e)=>(c(),u("section",P,[t("div",Q,[q(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),class:"input",placeholder:"Search student, subject or exam"},null,512),[[F,m.value]]),e[1]||(e[1]=t("div",{class:"spacer"},null,-1)),t("button",{class:"btn",onClick:y},"Add Grade")]),t("table",R,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",null,"Student"),t("th",null,"Subject"),t("th",null,"Exam"),t("th",null,"Score"),t("th",null,"Date"),t("th",{class:"actions"},"Actions")])],-1)),t("tbody",null,[(c(!0),u(z,null,H(h.value,a=>(c(),u("tr",{key:a.id},[t("td",null,l(_(a.studentId)),1),t("td",null,l(a.subject),1),t("td",null,l(a.exam),1),t("td",null,[t("span",W,l(a.score),1)]),t("td",null,l(G(a.date)),1),t("td",X,[t("button",{class:"btn secondary",onClick:L=>E(a.id)},"Edit",8,Y),t("button",{class:"btn danger",onClick:L=>B(a.id)},"Delete",8,Z)])]))),128)),h.value.length===0?(c(),u("tr",ee,[...e[2]||(e[2]=[t("td",{colspan:"6",class:"muted"},"No grades found",-1)])])):T("",!0)])]),r(j,{open:f.value,title:"Add Grade",onClose:o},{default:x(()=>[r(k,{"model-value":S(b),"onUpdate:modelValue":U,onSubmit:g,onCancel:o},null,8,["model-value"])]),_:1},8,["open"]),r(j,{open:p.value,title:"Edit Grade",onClose:o},{default:x(()=>[r(k,{"model-value":S(s),"onUpdate:modelValue":V,onSubmit:N,onCancel:o},null,8,["model-value"])]),_:1},8,["open"])]))}});export{ue as default};
