import{g as k,k as i,j as p,c as u,a as n,l as m,v,m as A,F as C,r as I,o as d,t as s}from"./DIz7m-9I.js";import{u as S}from"./B5aj7jcg.js";import{u as V}from"./BIr8MjRS.js";import"./CuQSOrhc.js";const x={class:"card"},B={class:"toolbar"},F={class:"table"},L={class:"badge"},M={key:0},P=k({__name:"reports",setup(N){const{students:f}=S(),{records:b}=V(),l=i(""),o=i(""),g=p(()=>b.value.filter(a=>{const e=a.date.slice(0,10),t=!l.value||e>=l.value,r=!o.value||e<=o.value;return t&&r})),c=p(()=>{const a=new Map;return g.value.forEach(e=>{const t=a.get(e.studentId)||{present:0,absent:0,late:0,total:0};e.status==="Present"&&t.present++,e.status==="Absent"&&t.absent++,e.status==="Late"&&t.late++,t.total++,a.set(e.studentId,t)}),Array.from(a.entries()).map(([e,t])=>{const r=f.value.find(h=>h.id===e),_=t.total?Math.round(t.present/t.total*100):0;return{studentId:e,name:r?.name||"Unknown",grade:r?.grade||"-",present:t.present,absent:t.absent,late:t.late,rate:_}}).sort((e,t)=>t.rate-e.rate)});function y(){l.value="",o.value=""}return(a,e)=>(d(),u("section",x,[n("div",B,[m(n("input",{class:"date",type:"date","onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t)},null,512),[[v,l.value]]),m(n("input",{class:"date",type:"date","onUpdate:modelValue":e[1]||(e[1]=t=>o.value=t)},null,512),[[v,o.value]]),e[2]||(e[2]=n("div",{class:"spacer"},null,-1)),n("button",{class:"btn secondary",onClick:y},"Clear Range")]),n("table",F,[e[4]||(e[4]=n("thead",null,[n("tr",null,[n("th",null,"Student"),n("th",null,"Grade"),n("th",null,"Present"),n("th",null,"Absent"),n("th",null,"Late"),n("th",null,"Attendance Rate")])],-1)),n("tbody",null,[(d(!0),u(C,null,I(c.value,t=>(d(),u("tr",{key:t.studentId},[n("td",null,s(t.name),1),n("td",null,[n("span",L,s(t.grade),1)]),n("td",null,s(t.present),1),n("td",null,s(t.absent),1),n("td",null,s(t.late),1),n("td",null,s(t.rate)+"%",1)]))),128)),c.value.length===0?(d(),u("tr",M,[...e[3]||(e[3]=[n("td",{colspan:"6",class:"muted"},"No data",-1)])])):A("",!0)])])]))}});export{P as default};
