{"file":"index-DDaLcEIy.js","mappings":"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","names":["arr","_ssrRenderList","_ssrInterpolate","_ssrRenderStyle"],"sources":["../../../../pages/index.vue"],"sourcesContent":["<template>\n  <div class=\"grid\" style=\"grid-template-columns: repeat(2, minmax(0, 1fr));\">\n    <section class=\"card\">\n      <h2 class=\"title\">Students by Grade</h2>\n      <div class=\"chart\">\n        <div v-for=\"g in gradeSeries\" :key=\"g.label\" class=\"chart-row\">\n          <div class=\"chart-label\">{{ g.label }}</div>\n          <div class=\"chart-bar\"><div class=\"chart-fill\" :style=\"{ width: g.pct + '%' }\"></div></div>\n          <div class=\"chart-value\">{{ g.value }}</div>\n        </div>\n      </div>\n    </section>\n    <section class=\"card\">\n      <h2 class=\"title\">Attendance Last 7 Days</h2>\n      <div class=\"chart\">\n        <div v-for=\"d in attendanceSeries\" :key=\"d.label\" class=\"chart-row\">\n          <div class=\"chart-label\">{{ d.label }}</div>\n          <div class=\"chart-bar\"><div class=\"chart-fill\" :style=\"{ width: d.pct + '%' }\"></div></div>\n          <div class=\"chart-value\">{{ d.value }}%</div>\n        </div>\n      </div>\n    </section>\n    <section class=\"card\">\n      <h2 class=\"title\">Exam Averages by Subject</h2>\n      <div class=\"chart\">\n        <div v-for=\"s in examSeries\" :key=\"s.label\" class=\"chart-row\">\n          <div class=\"chart-label\">{{ s.label }}</div>\n          <div class=\"chart-bar\"><div class=\"chart-fill\" :style=\"{ width: s.pct + '%' }\"></div></div>\n          <div class=\"chart-value\">{{ s.value }}</div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { useStudents } from '~/composables/useStudents'\nimport { useAttendance } from '~/composables/useAttendance'\nimport { useGrades } from '~/composables/useGrades'\nconst { students } = useStudents()\nconst { records } = useAttendance()\nconst { grades } = useGrades()\nconst gradeSeries = computed(() => {\n  const m = new Map<string, number>()\n  students.value.forEach(s => m.set(s.grade, (m.get(s.grade) || 0) + 1))\n  const arr = Array.from(m.entries()).map(([label, value]) => ({ label, value }))\n  const max = Math.max(1, ...arr.map(a => a.value))\n  return arr.sort((a,b) => a.label.localeCompare(b.label)).map(a => ({ ...a, pct: Math.round((a.value / max) * 100) }))\n})\nconst attendanceSeries = computed(() => {\n  const days = 7\n  const today = new Date()\n  const out: { label: string; value: number; pct: number }[] = []\n  for (let i = days - 1; i >= 0; i--) {\n    const d = new Date(today)\n    d.setDate(today.getDate() - i)\n    const key = d.toISOString().slice(0,10)\n    const dayRecords = records.value.filter(r => r.date.slice(0,10) === key)\n    const total = dayRecords.length\n    const present = dayRecords.filter(r => r.status === 'Present').length\n    const rate = total ? Math.round((present / total) * 100) : 0\n    out.push({ label: key.slice(5), value: rate, pct: rate })\n  }\n  return out\n})\nconst examSeries = computed(() => {\n  const m = new Map<string, number[]>()\n  grades.value.forEach(g => {\n    const arr = m.get(g.subject) || []\n    arr.push(g.score)\n    m.set(g.subject, arr)\n  })\n  const arr = Array.from(m.entries()).map(([label, scores]) => {\n    const avg = scores.length ? Math.round(scores.reduce((a,b) => a+b, 0) / scores.length) : 0\n    return { label, value: avg }\n  })\n  return arr.sort((a,b) => b.value - a.value).map(a => ({ ...a, pct: a.value }))\n})\n</script>\n\n<style scoped>\n.chart { display: grid; gap: 10px }\n.chart-row { display: grid; grid-template-columns: 120px 1fr 60px; align-items: center; gap: 10px }\n.chart-label { color: #666 }\n.chart-bar { background: #f1f3f5; height: 12px; border-radius: 6px; overflow: hidden }\n.chart-fill { background: linear-gradient(90deg,#4f46e5,#06b6d4); height: 100% }\n.chart-value { font-weight: 700 }\n</style>\n"],"version":3}