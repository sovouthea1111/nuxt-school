{"version":3,"file":"index-nCAz6zxM.js","sources":["../../../../pages/exams/index.vue"],"sourcesContent":["<template>\n  <section class=\"card\">\n    <h2 class=\"title\">Exams Overview</h2>\n    <div class=\"toolbar\">\n      <input class=\"date\" type=\"date\" v-model=\"from\" />\n      <input class=\"date\" type=\"date\" v-model=\"to\" />\n      <div class=\"spacer\"></div>\n      <button class=\"btn secondary\" @click=\"clearRange\">Clear</button>\n    </div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th>Date</th>\n          <th>Student</th>\n          <th>Subject</th>\n          <th>Exam</th>\n          <th>Score</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"g in filtered\" :key=\"g.id\">\n          <td>{{ formatDate(g.date) }}</td>\n          <td>{{ studentName(g.studentId) }}</td>\n          <td>{{ g.subject }}</td>\n          <td>{{ g.exam }}</td>\n          <td><span class=\"badge\">{{ g.score }}</span></td>\n        </tr>\n        <tr v-if=\"filtered.length === 0\">\n          <td colspan=\"5\" class=\"muted\">No exam results</td>\n        </tr>\n      </tbody>\n    </table>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { useGrades } from '~/composables/useGrades'\nimport { useStudents } from '~/composables/useStudents'\nconst { grades } = useGrades()\nconst { students } = useStudents()\nfunction studentName(id: string) {\n  return students.value.find(s => s.id === id)?.name || 'Unknown'\n}\nconst now = new Date()\nconst from = ref(new Date(now.getFullYear(), now.getMonth(), 1).toISOString().slice(0,10))\nconst to = ref('')\nconst filtered = computed(() => {\n  return grades.value.filter(g => {\n    const d = g.date.slice(0,10)\n    const afterFrom = !from.value || d >= from.value\n    const beforeTo = !to.value || d <= to.value\n    return afterFrom && beforeTo\n  }).sort((a,b) => b.score - a.score || b.date.localeCompare(a.date))\n})\nconst avgScore = computed(() => {\n  const arr = filtered.value\n  if (arr.length === 0) return 0\n  return Math.round(arr.reduce((a,b) => a + b.score, 0) / arr.length)\n})\nfunction formatDate(d: string) {\n  return new Date(d).toLocaleDateString()\n}\nfunction clearRange() {\n  from.value = ''\n  to.value = ''\n}\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate"],"mappings":";;;;;;;;;;;;;;;;;;;;AAuCA,UAAM,EAAE,OAAA,IAAW,UAAA;AACnB,UAAM,EAAE,SAAA,IAAa,YAAA;AACrB,aAAS,YAAY,IAAY;AAC/B,aAAO,SAAS,MAAM,KAAK,CAAA,MAAK,EAAE,OAAO,EAAE,GAAG,QAAQ;AAAA,IACxD;AACA,UAAM,0BAAU,KAAA;AAChB,UAAM,OAAO,IAAI,IAAI,KAAK,IAAI,eAAe,IAAI,SAAA,GAAY,CAAC,EAAE,YAAA,EAAc,MAAM,GAAE,EAAE,CAAC;AACzF,UAAM,KAAK,IAAI,EAAE;AACjB,UAAM,WAAW,SAAS,MAAM;AAC9B,aAAO,OAAO,MAAM,OAAO,CAAA,MAAK;AAC9B,cAAM,IAAI,EAAE,KAAK,MAAM,GAAE,EAAE;AAC3B,cAAM,YAAY,CAAC,KAAK,SAAS,KAAK,KAAK;AAC3C,cAAM,WAAW,CAAC,GAAG,SAAS,KAAK,GAAG;AACtC,eAAO,aAAa;AAAA,MACtB,CAAC,EAAE,KAAK,CAAC,GAAE,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,KAAK,cAAc,EAAE,IAAI,CAAC;AAAA,IACpE,CAAC;AACgB,aAAS,MAAM;AAC9B,YAAM,MAAM,SAAS;AACrB,UAAI,IAAI,WAAW,EAAG,QAAO;AAC7B,aAAO,KAAK,MAAM,IAAI,OAAO,CAAC,GAAE,MAAM,IAAI,EAAE,OAAO,CAAC,IAAI,IAAI,MAAM;AAAA,IACpE,CAAC;AACD,aAAS,WAAW,GAAW;AAC7B,aAAO,IAAI,KAAK,CAAC,EAAE,mBAAA;AAAA,IACrB;;uBA7DWA,eAAAC,WAAA,EAAA,OAAM,OAAA,GAAM,MAAA,CAAA,qHAGwB,KAAA,KAAI,2DACJ,GAAA,KAAE;AAezBC,oBAAA,SAAA,QAAL,MAAC;wCACH,WAAW,EAAE,IAAI,CAAA,4BACjB,YAAY,EAAE,SAAS,CAAA,aACvBC,eAAA,EAAE,OAAO,aACTA,eAAA,EAAE,IAAI,iCACcA,eAAA,EAAE,KAAK;;;AAE1B,UAAA,SAAA,MAAS,WAAM,GAAA;;;;;;;;;;;;;;;"}