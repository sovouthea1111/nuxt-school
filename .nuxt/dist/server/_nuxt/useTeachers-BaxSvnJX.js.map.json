{"file":"useTeachers-BaxSvnJX.js","mappings":";;;;;;;;;;;;;;;;AAoDA,UAAM,QAAQ;AACd,UAAM,OAAO;AACb,UAAM,QAAQ,SAAuB,EAAE,GAAG,MAAM,YAAY;AAC5D,UAAM,QAAQ,SAAS;AAAA,MACrB,MAAM,SAAS,MAAM,MAAM,KAAK,KAAA,EAAO,SAAS,CAAC;AAAA,IAAA,CAClD;AACD,UAAM,MAAM,MAAM,YAAY,CAAA,MAAK;AACjC,aAAO,OAAO,OAAO,CAAC;AAAA,IACxB,CAAC;AACD,UAAM,OAAO,CAAA,MAAK;AAChB,WAAK,sBAAsB,EAAE,GAAG,GAAG;AAAA,IACrC,GAAG,EAAE,MAAM,MAAM;;gGA5DN,EAAA,eAAA,SAAA,CAA2B,sHAKWA,eAAA,CAAA,EAAA,SAAA,CAAA,MAAM,QAAI,OAAA,CAAA,KAAaC,cAAA,SAAA,MAAM,IAAI;AAChD,UAAA,CAAA,MAAM,MAAI;;;;;gGAINA,cAAA,SAAA,MAAM,OAAO,iHAIbA,cAAA,SAAA,MAAM,KAAK,6HAIEA,cAAA,SAAA,MAAM,KAAK,kEAEnD,EAAA,eAAA,UAA2B,+IAKWA,cAAA,SAAA,MAAM,QAAQ,oDAEtC,EAAA,eAAA,SAAA,CAA2B,8DAEdA,cAAA,SAAA,MAAM,OAAO;;;;;;;;;;ACZnD,SAAS,QAAQ;AACf,SAAO,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,MAAM,CAAC,IAAI,KAAK,MAAM,SAAS,EAAE;AACrE;AAEO,SAAS,cAAc;AAC5B,QAAM,WAAW,SAAoB,YAAY,MAAM,CAAA,CAAE;AACrC,MAAI,KAAK;AAS7B,WAAS,OAAO;AACd,WAAO,SAAS;AAAA,EAClB;AACA,WAAS,QAAQ,IAAY;AAC3B,WAAO,SAAS,MAAM,KAAK,CAAA,MAAK,EAAE,OAAO,EAAE;AAAA,EAC7C;AACA,WAAS,OAAO,SAA8B;AAC5C,aAAS,MAAM,KAAK,EAAE,IAAI,MAAA,GAAS,GAAG,SAAS,UAAU,IAAI,KAAK,QAAQ,QAAQ,EAAE,YAAA,GAAe;AAAA,EAErG;AACA,WAAS,OAAO,IAAY,SAA8B;AACxD,UAAM,MAAM,SAAS,MAAM,UAAU,CAAA,MAAK,EAAE,OAAO,EAAE;AACrD,QAAI,QAAQ,IAAI;AACd,eAAS,MAAM,GAAG,IAAI,EAAE,IAAI,GAAG,SAAS,UAAU,IAAI,KAAK,QAAQ,QAAQ,EAAE,cAAY;AAAA,IAE3F;AAAA,EACF;AACA,WAAS,OAAO,IAAY;AAC1B,UAAM,MAAM,SAAS,MAAM,UAAU,CAAA,MAAK,EAAE,OAAO,EAAE;AACrD,QAAI,QAAQ,IAAI;AACd,eAAS,MAAM,OAAO,KAAK,CAAC;AAAA,IAE9B;AAAA,EACF;AACA,SAAO,EAAE,UAAU,MAAM,SAAS,QAAQ,QAAQ,OAAA;AACpD;","names":["_ssrRenderClass","_ssrRenderAttr"],"sources":["../../../../components/TeacherForm.vue","../../../../composables/useTeachers.ts"],"sourcesContent":["<template>\n  <form @submit.prevent=\"onSubmit\">\n    <div class=\"form-grid\">\n      <div style=\"grid-column: 1 / -1\">\n        <div class=\"section-title\">Profile</div>\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Name</label>\n        <input class=\"input\" :class=\"{ invalid: !valid.name }\" v-model=\"local.name\" placeholder=\"Teacher full name\" />\n        <div class=\"error\" v-if=\"!valid.name\">Name is required</div>\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Subject</label>\n        <input class=\"input\" v-model=\"local.subject\" placeholder=\"Subject taught\" />\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Phone</label>\n        <input class=\"input\" v-model=\"local.phone\" placeholder=\"Primary phone\" />\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Email</label>\n        <input class=\"input\" type=\"email\" v-model=\"local.email\" placeholder=\"Primary email\" />\n      </div>\n      <div style=\"grid-column: 1 / -1\">\n        <div class=\"section-title\">Employment</div>\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Hire Date</label>\n        <input class=\"date\" type=\"date\" v-model=\"local.hireDate\" />\n      </div>\n      <div class=\"field\" style=\"grid-column: 1 / -1\">\n        <label class=\"label\">Address</label>\n        <input class=\"input\" v-model=\"local.address\" placeholder=\"City or district\" />\n      </div>\n    </div>\n    <div class=\"toolbar\">\n      <button class=\"btn\" type=\"submit\">Save</button>\n      <button class=\"btn secondary\" type=\"button\" @click=\"emit('cancel')\">Cancel</button>\n    </div>\n  </form>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive, watch, computed } from 'vue'\ntype TeacherModel = {\n  name: string\n  subject: string\n  phone: string\n  email: string\n  hireDate: string\n  address: string\n}\nconst props = defineProps<{ modelValue: TeacherModel }>()\nconst emit = defineEmits<{ (e: 'update:model-value', v: TeacherModel): void; (e: 'submit'): void; (e: 'cancel'): void }>()\nconst local = reactive<TeacherModel>({ ...props.modelValue })\nconst valid = reactive({\n  name: computed(() => local.name.trim().length > 0)\n})\nwatch(() => props.modelValue, v => {\n  Object.assign(local, v)\n})\nwatch(local, v => {\n  emit('update:model-value', { ...v })\n}, { deep: true })\nfunction onSubmit() {\n  emit('submit')\n}\n</script>\n","import { ref } from 'vue'\nimport { useState } from 'nuxt/app'\n\ntype Teacher = {\n  id: string\n  name: string\n  subject: string\n  phone: string\n  email: string\n  hireDate: string\n  address: string\n}\n\nfunction sampleSeed(): Teacher[] {\n  return [\n    { id: genId(), name: 'Sokha Hun', subject: 'Mathematics', phone: '012345678', email: 'sokha@example.com', hireDate: new Date('2022-09-01').toISOString(), address: 'Phnom Penh' },\n    { id: genId(), name: 'Borey Chhim', subject: 'Khmer', phone: '098765432', email: 'borey@example.com', hireDate: new Date('2023-01-10').toISOString(), address: 'Siem Reap' }\n  ]\n}\n\nfunction genId() {\n  return Math.random().toString(36).slice(2) + Date.now().toString(36)\n}\n\nexport function useTeachers() {\n  const teachers = useState<Teacher[]>('teachers', () => [])\n  const initialized = ref(false)\n  if (process.client && !initialized.value) {\n    const raw = localStorage.getItem('teachers')\n    teachers.value = raw ? JSON.parse(raw) as Teacher[] : sampleSeed()\n    initialized.value = true\n  }\n  function persist() {\n    if (process.client) localStorage.setItem('teachers', JSON.stringify(teachers.value))\n  }\n  function list() {\n    return teachers.value\n  }\n  function getById(id: string) {\n    return teachers.value.find(t => t.id === id)\n  }\n  function create(payload: Omit<Teacher, 'id'>) {\n    teachers.value.push({ id: genId(), ...payload, hireDate: new Date(payload.hireDate).toISOString() })\n    persist()\n  }\n  function update(id: string, payload: Omit<Teacher, 'id'>) {\n    const idx = teachers.value.findIndex(t => t.id === id)\n    if (idx !== -1) {\n      teachers.value[idx] = { id, ...payload, hireDate: new Date(payload.hireDate).toISOString() }\n      persist()\n    }\n  }\n  function remove(id: string) {\n    const idx = teachers.value.findIndex(t => t.id === id)\n    if (idx !== -1) {\n      teachers.value.splice(idx, 1)\n      persist()\n    }\n  }\n  return { teachers, list, getById, create, update, remove }\n}\n"],"version":3}