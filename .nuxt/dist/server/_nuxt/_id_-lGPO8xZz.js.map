{"version":3,"file":"_id_-lGPO8xZz.js","sources":["../../../../pages/students/edit/[id].vue"],"sourcesContent":["<template>\n  <Popup v-if=\"student\" :open=\"open\" title=\"Edit Student\" @close=\"handleClose\">\n    <StudentForm :model-value=\"model\" @update:model-value=\"onUpdate\" @submit=\"handleUpdate\" />\n  </Popup>\n  <section class=\"card\" v-else>\n    <div class=\"muted\">Student not found</div>\n    <div class=\"toolbar\"><NuxtLink to=\"/students\" class=\"btn\">Back</NuxtLink></div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { useRoute } from 'vue-router'\nimport { computed, reactive, watch, ref } from 'vue'\nimport { useStudents } from '~/composables/useStudents'\nimport { navigateTo } from 'nuxt/app'\nimport Popup from '~/components/Popup.vue'\n\nconst route = useRoute()\nconst id = route.params.id as string\nconst { getById, update } = useStudents()\nconst student = computed(() => getById(id))\nconst open = ref(true)\ntype StudentModel = {\n  name: string\n  gender: string\n  grade: string\n  age: number\n  guardian: string\n  enrollmentDate: string\n  address: string\n}\nlet model = reactive<StudentModel>({\n  name: student.value?.name || '',\n  gender: student.value?.gender || 'Female',\n  grade: student.value?.grade || 'Grade 1',\n  age: student.value?.age || 6,\n  guardian: student.value?.guardian || '',\n  enrollmentDate: (student.value?.enrollmentDate || new Date().toISOString().slice(0, 10)).slice(0,10),\n  address: student.value?.address || ''\n})\nfunction onUpdate(v: StudentModel) {\n  Object.assign(model, v)\n}\nwatch(student, s => {\n  if (!s) return\n  model.name = s.name\n  model.gender = s.gender\n  model.grade = s.grade\n  model.age = s.age\n  model.guardian = s.guardian\n  model.enrollmentDate = s.enrollmentDate.slice(0,10)\n  model.address = s.address\n}, { immediate: true })\nasync function handleUpdate() {\n  update(id, { ...model })\n  await navigateTo('/students')\n}\nfunction handleClose() {\n  navigateTo('/students')\n}\n</script>\n"],"names":["_push","_parent","_unref","_createVNode","_ssrRenderAttrs","_mergeProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAiBA,UAAM,QAAQ,SAAA;AACd,UAAM,KAAK,MAAM,OAAO;AACxB,UAAM,EAAE,SAAS,OAAA,IAAW,YAAA;AAC5B,UAAM,UAAU,SAAS,MAAM,QAAQ,EAAE,CAAC;AAC1C,UAAM,OAAO,IAAI,IAAI;AAUrB,QAAI,QAAQ,SAAuB;AAAA,MACjC,MAAM,QAAQ,OAAO,QAAQ;AAAA,MAC7B,QAAQ,QAAQ,OAAO,UAAU;AAAA,MACjC,OAAO,QAAQ,OAAO,SAAS;AAAA,MAC/B,KAAK,QAAQ,OAAO,OAAO;AAAA,MAC3B,UAAU,QAAQ,OAAO,YAAY;AAAA,MACrC,iBAAiB,QAAQ,OAAO,uCAAsB,KAAA,GAAO,YAAA,EAAc,MAAM,GAAG,EAAE,GAAG,MAAM,GAAE,EAAE;AAAA,MACnG,SAAS,QAAQ,OAAO,WAAW;AAAA,IAAA,CACpC;AACD,aAAS,SAAS,GAAiB;AACjC,aAAO,OAAO,OAAO,CAAC;AAAA,IACxB;AACA,UAAM,SAAS,CAAA,MAAK;AAClB,UAAI,CAAC,EAAG;AACR,YAAM,OAAO,EAAE;AACf,YAAM,SAAS,EAAE;AACjB,YAAM,QAAQ,EAAE;AAChB,YAAM,MAAM,EAAE;AACd,YAAM,WAAW,EAAE;AACnB,YAAM,iBAAiB,EAAE,eAAe,MAAM,GAAE,EAAE;AAClD,YAAM,UAAU,EAAE;AAAA,IACpB,GAAG,EAAE,WAAW,MAAM;AACtB,mBAAe,eAAe;AAC5B,aAAO,IAAI,EAAE,GAAG,OAAO;AACvB,YAAM,WAAW,WAAW;AAAA,IAC9B;AACA,aAAS,cAAc;AACrB,iBAAW,WAAW;AAAA,IACxB;;;;UA1De,QAAA,OAAO;;UAAG,MAAM,KAAA;AAAA,UAAM,OAAM;AAAA,UAAgB,SAAO;AAAA,QAAA;2BAAhE,CAEQ,GAAAA,QAAAC,UAAA,aAAA;;;gBADQ,eAAaC,MAAA,KAAA;AAAA,gBAAQ,uBAAoB;AAAA,gBAAW,UAAQ;AAAA,cAAA;;;gBAA1EC,YAA0F,wBAAA;AAAA,kBAA5E,eAAaD,MAAA,KAAA;AAAA,kBAAQ,uBAAoB;AAAA,kBAAW,UAAQ;AAAA,gBAAA;;;;;;;AAEnE,cAAA,WAAAE,eAAAC,WAAA,EAAA,OAAM,UAAM,MAAA,CAAA,CAAA,kEAAA;;UAEY,IAAG;AAAA,UAAY,OAAM;AAAA,QAAA;2BAA/B,CAAoD,GAAAL,QAAAC,UAAA,aAAA;;;;;gCAAf,MAAI;AAAA,cAAA;AAAA;;;;;;;;;;;;;;;"}