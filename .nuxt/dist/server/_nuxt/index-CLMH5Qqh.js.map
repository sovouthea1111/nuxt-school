{"version":3,"file":"index-CLMH5Qqh.js","sources":["../../../../pages/classes/index.vue"],"sourcesContent":["<template>\n  <section class=\"card\">\n    <div class=\"toolbar\">\n      <input v-model=\"q\" class=\"input\" placeholder=\"Search name, grade, teacher or room\" />\n      <div class=\"spacer\"></div>\n      <button class=\"btn\" @click=\"openCreate\">Add Class</button>\n    </div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Grade</th>\n          <th>Section</th>\n          <th>Teacher</th>\n          <th>Room</th>\n          <th class=\"actions\">Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"c in filtered\" :key=\"c.id\">\n          <td>{{ c.name }}</td>\n          <td><span class=\"badge\">{{ c.grade }}</span></td>\n          <td>{{ c.section }}</td>\n          <td>{{ c.teacher }}</td>\n          <td>{{ c.room }}</td>\n          <td class=\"actions\">\n            <button class=\"btn secondary\" @click=\"openEdit(c.id)\">Edit</button>\n            <button class=\"btn danger\" @click=\"handleDelete(c.id)\">Delete</button>\n          </td>\n        </tr>\n        <tr v-if=\"filtered.length === 0\">\n          <td colspan=\"6\" class=\"muted\">No classes found</td>\n        </tr>\n      </tbody>\n    </table>\n    <Popup :open=\"showCreate\" title=\"Add Class\" @close=\"closeModal\">\n      <ClassForm :model-value=\"createModel\" @update:model-value=\"onUpdateCreate\" @submit=\"handleCreate\" @cancel=\"closeModal\" />\n    </Popup>\n    <Popup :open=\"showEdit\" title=\"Edit Class\" @close=\"closeModal\">\n      <ClassForm :model-value=\"editModel\" @update:model-value=\"onUpdateEdit\" @submit=\"handleUpdate\" @cancel=\"closeModal\" />\n    </Popup>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, computed } from 'vue'\nimport Popup from '~/components/Popup.vue'\nimport ClassForm from '~/components/ClassForm.vue'\nimport { useClasses } from '~/composables/useClasses'\nconst { classes, create, update, remove, getById } = useClasses()\nconst q = ref('')\nconst filtered = computed(() => {\n  const v = q.value.trim().toLowerCase()\n  return classes.value.filter(c => {\n    const text = `${c.name} ${c.grade} ${c.section} ${c.teacher} ${c.room}`.toLowerCase()\n    return !v || text.includes(v)\n  })\n})\ntype ClassModel = { name: string; grade: string; section: string; teacher: string; room: string }\nconst showCreate = ref(false)\nconst showEdit = ref(false)\nconst editId = ref<string | null>(null)\nlet createModel = reactive<ClassModel>({ name: '', grade: 'Grade 1', section: 'Red', teacher: '', room: '' })\nlet editModel = reactive<ClassModel>({ name: '', grade: 'Grade 1', section: 'Red', teacher: '', room: '' })\nfunction openCreate() { showCreate.value = true }\nfunction openEdit(id: string) {\n  const c = getById(id)\n  if (!c) return\n  editId.value = id\n  editModel.name = c.name\n  editModel.grade = c.grade\n  editModel.section = c.section\n  editModel.teacher = c.teacher\n  editModel.room = c.room\n  showEdit.value = true\n}\nfunction closeModal() { showCreate.value = false; showEdit.value = false }\nfunction onUpdateCreate(v: ClassModel) { Object.assign(createModel, v) }\nfunction onUpdateEdit(v: ClassModel) { Object.assign(editModel, v) }\nfunction handleCreate() { create({ ...createModel }); closeModal() }\nfunction handleUpdate() { if (!editId.value) return; update(editId.value, { ...editModel }); closeModal() }\nfunction handleDelete(id: string) { remove(id) }\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate","_push","_parent","_unref","_createVNode","ClassForm"],"mappings":";;;;;;;;;;;;;;;;;;;;AAiDA,UAAM,EAAE,SAAS,QAAQ,OAAwB,IAAI,WAAA;AACrD,UAAM,IAAI,IAAI,EAAE;AAChB,UAAM,WAAW,SAAS,MAAM;AAC9B,YAAM,IAAI,EAAE,MAAM,KAAA,EAAO,YAAA;AACzB,aAAO,QAAQ,MAAM,OAAO,CAAA,MAAK;AAC/B,cAAM,OAAO,GAAG,EAAE,IAAI,IAAI,EAAE,KAAK,IAAI,EAAE,OAAO,IAAI,EAAE,OAAO,IAAI,EAAE,IAAI,GAAG,YAAA;AACxE,eAAO,CAAC,KAAK,KAAK,SAAS,CAAC;AAAA,MAC9B,CAAC;AAAA,IACH,CAAC;AAED,UAAM,aAAa,IAAI,KAAK;AAC5B,UAAM,WAAW,IAAI,KAAK;AAC1B,UAAM,SAAS,IAAmB,IAAI;AACtC,QAAI,cAAc,SAAqB,EAAE,MAAM,IAAI,OAAO,WAAW,SAAS,OAAO,SAAS,IAAI,MAAM,IAAI;AAC5G,QAAI,YAAY,SAAqB,EAAE,MAAM,IAAI,OAAO,WAAW,SAAS,OAAO,SAAS,IAAI,MAAM,IAAI;AAa1G,aAAS,aAAa;AAAE,iBAAW,QAAQ;AAAO,eAAS,QAAQ;AAAA,IAAM;AACzE,aAAS,eAAe,GAAe;AAAE,aAAO,OAAO,aAAa,CAAC;AAAA,IAAE;AACvE,aAAS,aAAa,GAAe;AAAE,aAAO,OAAO,WAAW,CAAC;AAAA,IAAE;AACnE,aAAS,eAAe;AAAE,aAAO,EAAE,GAAG,aAAa;AAAG,iBAAA;AAAA,IAAa;AACnE,aAAS,eAAe;AAAE,UAAI,CAAC,OAAO,MAAO;AAAQ,aAAO,OAAO,OAAO,EAAE,GAAG,WAAW;AAAG,iBAAA;AAAA,IAAa;;uBA/E/FA,eAAAC,WAAA,EAAA,OAAM,UAAM,MAAA,CAAA,uDAED,EAAA,KAAC;AAgBCC,oBAAA,SAAA,QAAL,MAAC;yBACHC,eAAA,EAAE,IAAI,iCACcA,eAAA,EAAE,KAAK,oBAC3BA,eAAA,EAAE,OAAO,aACTA,eAAA,EAAE,OAAO,aACTA,eAAA,EAAE,IAAI;;;AAML,UAAA,SAAA,MAAS,WAAM,GAAA;;;;;;;QAKrB,MAAM,WAAA;AAAA,QAAY,OAAM;AAAA,QAAa,SAAO;AAAA,MAAA;yBAApD,CAEQ,GAAAC,QAAAC,UAAA,aAAA;;;cADM,eAAaC,MAAA,WAAA;AAAA,cAAc,uBAAoB;AAAA,cAAiB,UAAQ;AAAA,cAAe,UAAQ;AAAA,YAAA;;;cAA3GC,YAAyHC,aAAA;AAAA,gBAA7G,eAAaF,MAAA,WAAA;AAAA,gBAAc,uBAAoB;AAAA,gBAAiB,UAAQ;AAAA,gBAAe,UAAQ;AAAA,cAAA;;;;;;;QAErG,MAAM,SAAA;AAAA,QAAU,OAAM;AAAA,QAAc,SAAO;AAAA,MAAA;yBAAnD,CAEQ,GAAAF,QAAAC,UAAA,aAAA;;;cADM,eAAaC,MAAA,SAAA;AAAA,cAAY,uBAAoB;AAAA,cAAe,UAAQ;AAAA,cAAe,UAAQ;AAAA,YAAA;;;cAAvGC,YAAqHC,aAAA;AAAA,gBAAzG,eAAaF,MAAA,SAAA;AAAA,gBAAY,uBAAoB;AAAA,gBAAe,UAAQ;AAAA,gBAAe,UAAQ;AAAA,cAAA;;;;;;;;;;;;;;;;"}