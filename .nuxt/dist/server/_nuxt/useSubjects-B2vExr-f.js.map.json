{"file":"useSubjects-B2vExr-f.js","mappings":";;;;;;;;;;;;;;;;AAuCA,UAAM,QAAQ;AACd,UAAM,OAAO;AACb,UAAM,QAAQ,SAAuB,EAAE,GAAG,MAAM,YAAY;AAC5D,UAAM,QAAQ,SAAS;AAAA,MACrB,MAAM,SAAS,MAAM,MAAM,KAAK,KAAA,EAAO,SAAS,CAAC;AAAA,IAAA,CAClD;AACD,UAAM,MAAM,MAAM,YAAY,CAAA,MAAK;AACjC,aAAO,OAAO,OAAO,CAAC;AAAA,IACxB,CAAC;AACD,UAAM,OAAO,CAAA,MAAK;AAChB,WAAK,sBAAsB,EAAE,GAAG,GAAG;AAAA,IACrC,GAAG,EAAE,MAAM,MAAM;;gGA/CN,EAAA,eAAA,SAAA,CAA2B,sHAKWA,eAAA,CAAA,EAAA,SAAA,CAAA,MAAM,QAAI,OAAA,CAAA,KAAaC,cAAA,SAAA,MAAM,IAAI;AAChD,UAAA,CAAA,MAAM,MAAI;;;;;6FAINA,cAAA,SAAA,MAAM,IAAI,+GAIVA,cAAA,SAAA,MAAM,OAAO,mFAE1B,EAAA,eAAA,SAAA,CAA2B,kEAEdA,cAAA,SAAA,MAAM,WAAW;;;;;;;;;;ACHvD,SAAS,QAAQ;AACf,SAAO,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,MAAM,CAAC,IAAI,KAAK,MAAM,SAAS,EAAE;AACrE;AAEO,SAAS,cAAc;AAC5B,QAAM,WAAW,SAAoB,YAAY,MAAM,CAAA,CAAE;AACrC,MAAI,KAAK;AAS7B,WAAS,OAAO;AACd,WAAO,SAAS;AAAA,EAClB;AACA,WAAS,QAAQ,IAAY;AAC3B,WAAO,SAAS,MAAM,KAAK,CAAA,MAAK,EAAE,OAAO,EAAE;AAAA,EAC7C;AACA,WAAS,OAAO,SAA8B;AAC5C,aAAS,MAAM,KAAK,EAAE,IAAI,SAAS,GAAG,SAAS;AAAA,EAEjD;AACA,WAAS,OAAO,IAAY,SAA8B;AACxD,UAAM,MAAM,SAAS,MAAM,UAAU,CAAA,MAAK,EAAE,OAAO,EAAE;AACrD,QAAI,QAAQ,IAAI;AACd,eAAS,MAAM,GAAG,IAAI,EAAE,IAAI,GAAG,QAAA;AAAA,IAEjC;AAAA,EACF;AACA,WAAS,OAAO,IAAY;AAC1B,UAAM,MAAM,SAAS,MAAM,UAAU,CAAA,MAAK,EAAE,OAAO,EAAE;AACrD,QAAI,QAAQ,IAAI;AACd,eAAS,MAAM,OAAO,KAAK,CAAC;AAAA,IAE9B;AAAA,EACF;AACA,SAAO,EAAE,UAAU,MAAM,SAAS,QAAQ,QAAQ,OAAA;AACpD;","names":["_ssrRenderClass","_ssrRenderAttr"],"sources":["../../../../components/SubjectForm.vue","../../../../composables/useSubjects.ts"],"sourcesContent":["<template>\n  <form @submit.prevent=\"onSubmit\">\n    <div class=\"form-grid\">\n      <div style=\"grid-column: 1 / -1\">\n        <div class=\"section-title\">Subject</div>\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Name</label>\n        <input class=\"input\" :class=\"{ invalid: !valid.name }\" v-model=\"local.name\" placeholder=\"Subject name\" />\n        <div class=\"error\" v-if=\"!valid.name\">Name is required</div>\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Code</label>\n        <input class=\"input\" v-model=\"local.code\" placeholder=\"e.g., MATH\" />\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Teacher</label>\n        <input class=\"input\" v-model=\"local.teacher\" placeholder=\"Assigned teacher\" />\n      </div>\n      <div class=\"field\" style=\"grid-column: 1 / -1\">\n        <label class=\"label\">Description</label>\n        <input class=\"input\" v-model=\"local.description\" placeholder=\"Short description\" />\n      </div>\n    </div>\n    <div class=\"toolbar\">\n      <button class=\"btn\" type=\"submit\">Save</button>\n      <button class=\"btn secondary\" type=\"button\" @click=\"emit('cancel')\">Cancel</button>\n    </div>\n  </form>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive, watch, computed } from 'vue'\ntype SubjectModel = {\n  name: string\n  code: string\n  description: string\n  teacher: string\n}\nconst props = defineProps<{ modelValue: SubjectModel }>()\nconst emit = defineEmits<{ (e: 'update:model-value', v: SubjectModel): void; (e: 'submit'): void; (e: 'cancel'): void }>()\nconst local = reactive<SubjectModel>({ ...props.modelValue })\nconst valid = reactive({\n  name: computed(() => local.name.trim().length > 0)\n})\nwatch(() => props.modelValue, v => {\n  Object.assign(local, v)\n})\nwatch(local, v => {\n  emit('update:model-value', { ...v })\n}, { deep: true })\nfunction onSubmit() {\n  emit('submit')\n}\n</script>\n","import { ref } from 'vue'\nimport { useState } from 'nuxt/app'\n\ntype Subject = {\n  id: string\n  name: string\n  code: string\n  description: string\n  teacher: string\n}\n\nfunction sampleSeed(): Subject[] {\n  return [\n    { id: genId(), name: 'Mathematics', code: 'MATH', description: 'Numbers and operations', teacher: 'Sokha Hun' },\n    { id: genId(), name: 'Khmer', code: 'KHMR', description: 'Language and literature', teacher: 'Borey Chhim' }\n  ]\n}\n\nfunction genId() {\n  return Math.random().toString(36).slice(2) + Date.now().toString(36)\n}\n\nexport function useSubjects() {\n  const subjects = useState<Subject[]>('subjects', () => [])\n  const initialized = ref(false)\n  if (process.client && !initialized.value) {\n    const raw = localStorage.getItem('subjects')\n    subjects.value = raw ? JSON.parse(raw) as Subject[] : sampleSeed()\n    initialized.value = true\n  }\n  function persist() {\n    if (process.client) localStorage.setItem('subjects', JSON.stringify(subjects.value))\n  }\n  function list() {\n    return subjects.value\n  }\n  function getById(id: string) {\n    return subjects.value.find(s => s.id === id)\n  }\n  function create(payload: Omit<Subject, 'id'>) {\n    subjects.value.push({ id: genId(), ...payload })\n    persist()\n  }\n  function update(id: string, payload: Omit<Subject, 'id'>) {\n    const idx = subjects.value.findIndex(s => s.id === id)\n    if (idx !== -1) {\n      subjects.value[idx] = { id, ...payload }\n      persist()\n    }\n  }\n  function remove(id: string) {\n    const idx = subjects.value.findIndex(s => s.id === id)\n    if (idx !== -1) {\n      subjects.value.splice(idx, 1)\n      persist()\n    }\n  }\n  return { subjects, list, getById, create, update, remove }\n}\n"],"version":3}