{"file":"reports-D90eCIBj.js","mappings":";;;;;;;;;;;;;;;;;;;AAoCA,UAAM,EAAE,OAAA,IAAW,UAAA;AACnB,UAAM,IAAI,IAAI,EAAE;AAChB,UAAM,WAAW,SAAS,MAAM;AAC9B,YAAM,IAAI,EAAE,MAAM,KAAA,EAAO,YAAA;AACzB,aAAO,OAAO,MAAM,OAAO,CAAA,MAAK;AAC9B,cAAM,OAAO,GAAG,EAAE,IAAI,IAAI,EAAE,OAAO,GAAG,YAAA;AACtC,eAAO,CAAC,KAAK,KAAK,SAAS,CAAC;AAAA,MAC9B,CAAC;AAAA,IACH,CAAC;AACD,UAAM,UAAU,SAAS,MAAM;AAC7B,YAAM,0BAAU,IAAA;AAChB,eAAS,MAAM,QAAQ,CAAA,MAAK;AAC1B,cAAM,MAAM,GAAG,EAAE,IAAI,KAAK,EAAE,OAAO;AACnC,cAAM,MAAM,IAAI,IAAI,GAAG,KAAK,CAAA;AAC5B,YAAI,KAAK,EAAE,KAAK;AAChB,YAAI,IAAI,KAAK,GAAG;AAAA,MAClB,CAAC;AACD,aAAO,MAAM,KAAK,IAAI,QAAA,CAAS,EAAE,IAAI,CAAC,CAAC,KAAK,MAAM,MAAM;AACtD,cAAM,CAAC,MAAM,OAAO,IAAI,IAAI,MAAM,IAAI;AACtC,cAAM,QAAQ,OAAO;AACrB,cAAM,MAAM,QAAQ,KAAK,MAAM,OAAO,OAAO,CAAC,GAAE,MAAM,IAAE,GAAG,CAAC,IAAI,KAAK,IAAI;AACzE,cAAM,MAAM,QAAQ,KAAK,IAAI,GAAG,MAAM,IAAI;AAC1C,cAAM,MAAM,QAAQ,KAAK,IAAI,GAAG,MAAM,IAAI;AAC1C,eAAO,EAAE,KAAK,MAAM,SAAS,OAAO,KAAK,KAAK,IAAA;AAAA,MAChD,CAAC,EAAE,KAAK,CAAC,GAAE,MAAM,EAAE,MAAM,EAAE,GAAG;AAAA,IAChC,CAAC;;uBA5DUA,eAAAC,WAAA,EAAA,OAAM,UAAM,MAAA,CAAA,qEAEa,EAAA,KAAC;AAcXC,oBAAA,QAAA,QAAP,QAAG;yBACLC,eAAA,IAAI,IAAI,aACRA,eAAA,IAAI,OAAO,aACXA,eAAA,IAAI,KAAK,iCACWA,eAAA,IAAI,GAAG,oBAC3BA,eAAA,IAAI,GAAG,aACPA,eAAA,IAAI,GAAG;;;AAEN,UAAA,QAAA,MAAQ,WAAM,GAAA;;;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate"],"sources":["../../../../pages/exams/reports.vue"],"sourcesContent":["<template>\n  <section class=\"card\">\n    <div class=\"toolbar\">\n      <input class=\"input\" v-model=\"q\" placeholder=\"Filter by exam or subject\" />\n    </div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th>Exam</th>\n          <th>Subject</th>\n          <th>Entries</th>\n          <th>Average</th>\n          <th>Best</th>\n          <th>Worst</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"row in summary\" :key=\"row.key\">\n          <td>{{ row.exam }}</td>\n          <td>{{ row.subject }}</td>\n          <td>{{ row.count }}</td>\n          <td><span class=\"badge\">{{ row.avg }}</span></td>\n          <td>{{ row.max }}</td>\n          <td>{{ row.min }}</td>\n        </tr>\n        <tr v-if=\"summary.length === 0\">\n          <td colspan=\"6\" class=\"muted\">No exam data</td>\n        </tr>\n      </tbody>\n    </table>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { useGrades } from '~/composables/useGrades'\nconst { grades } = useGrades()\nconst q = ref('')\nconst filtered = computed(() => {\n  const v = q.value.trim().toLowerCase()\n  return grades.value.filter(g => {\n    const text = `${g.exam} ${g.subject}`.toLowerCase()\n    return !v || text.includes(v)\n  })\n})\nconst summary = computed(() => {\n  const map = new Map<string, number[]>()\n  filtered.value.forEach(g => {\n    const key = `${g.exam}::${g.subject}`\n    const arr = map.get(key) || []\n    arr.push(g.score)\n    map.set(key, arr)\n  })\n  return Array.from(map.entries()).map(([key, scores]) => {\n    const [exam, subject] = key.split('::')\n    const count = scores.length\n    const avg = count ? Math.round(scores.reduce((a,b) => a+b, 0) / count) : 0\n    const max = count ? Math.max(...scores) : 0\n    const min = count ? Math.min(...scores) : 0\n    return { key, exam, subject, count, avg, max, min }\n  }).sort((a,b) => b.avg - a.avg)\n})\n</script>\n"],"version":3}