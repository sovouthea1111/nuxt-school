{"version":3,"file":"useClasses-sevOld5o.js","sources":["../../../../components/ClassForm.vue","../../../../composables/useClasses.ts"],"sourcesContent":["<template>\n  <form @submit.prevent=\"onSubmit\">\n    <div class=\"form-grid\">\n      <div style=\"grid-column: 1 / -1\">\n        <div class=\"section-title\">Class</div>\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Name</label>\n        <input class=\"input\" :class=\"{ invalid: !valid.name }\" v-model=\"local.name\" placeholder=\"Class name (e.g., Grade 3 - Red)\" />\n        <div class=\"error\" v-if=\"!valid.name\">Name is required</div>\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Grade</label>\n        <select class=\"select\" v-model=\"local.grade\">\n          <option>Grade 1</option>\n          <option>Grade 2</option>\n          <option>Grade 3</option>\n          <option>Grade 4</option>\n          <option>Grade 5</option>\n          <option>Grade 6</option>\n        </select>\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Section</label>\n        <input class=\"input\" v-model=\"local.section\" placeholder=\"e.g., Red\" />\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Teacher</label>\n        <input class=\"input\" v-model=\"local.teacher\" placeholder=\"Primary teacher\" />\n      </div>\n      <div class=\"field\">\n        <label class=\"label\">Room</label>\n        <input class=\"input\" v-model=\"local.room\" placeholder=\"e.g., A1\" />\n      </div>\n    </div>\n    <div class=\"toolbar\">\n      <button class=\"btn\" type=\"submit\">Save</button>\n      <button class=\"btn secondary\" type=\"button\" @click=\"emit('cancel')\">Cancel</button>\n    </div>\n  </form>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive, watch, computed } from 'vue'\ntype ClassModel = {\n  name: string\n  grade: string\n  section: string\n  teacher: string\n  room: string\n}\nconst props = defineProps<{ modelValue: ClassModel }>()\nconst emit = defineEmits<{ (e: 'update:model-value', v: ClassModel): void; (e: 'submit'): void; (e: 'cancel'): void }>()\nconst local = reactive<ClassModel>({ ...props.modelValue })\nconst valid = reactive({\n  name: computed(() => local.name.trim().length > 0)\n})\nwatch(() => props.modelValue, v => {\n  Object.assign(local, v)\n})\nwatch(local, v => {\n  emit('update:model-value', { ...v })\n}, { deep: true })\nfunction onSubmit() {\n  emit('submit')\n}\n</script>\n","import { ref } from 'vue'\nimport { useState } from 'nuxt/app'\n\ntype SchoolClass = {\n  id: string\n  name: string\n  grade: string\n  section: string\n  teacher: string\n  room: string\n}\n\nfunction sampleSeed(): SchoolClass[] {\n  return [\n    { id: genId(), name: 'Grade 3 - Red', grade: 'Grade 3', section: 'Red', teacher: 'Sokha Hun', room: 'A1' },\n    { id: genId(), name: 'Grade 2 - Blue', grade: 'Grade 2', section: 'Blue', teacher: 'Borey Chhim', room: 'B2' }\n  ]\n}\n\nfunction genId() {\n  return Math.random().toString(36).slice(2) + Date.now().toString(36)\n}\n\nexport function useClasses() {\n  const classes = useState<SchoolClass[]>('classes', () => [])\n  const initialized = ref(false)\n  if (process.client && !initialized.value) {\n    const raw = localStorage.getItem('classes')\n    classes.value = raw ? JSON.parse(raw) as SchoolClass[] : sampleSeed()\n    initialized.value = true\n  }\n  function persist() {\n    if (process.client) localStorage.setItem('classes', JSON.stringify(classes.value))\n  }\n  function list() {\n    return classes.value\n  }\n  function getById(id: string) {\n    return classes.value.find(c => c.id === id)\n  }\n  function create(payload: Omit<SchoolClass, 'id'>) {\n    classes.value.push({ id: genId(), ...payload })\n    persist()\n  }\n  function update(id: string, payload: Omit<SchoolClass, 'id'>) {\n    const idx = classes.value.findIndex(c => c.id === id)\n    if (idx !== -1) {\n      classes.value[idx] = { id, ...payload }\n      persist()\n    }\n  }\n  function remove(id: string) {\n    const idx = classes.value.findIndex(c => c.id === id)\n    if (idx !== -1) {\n      classes.value.splice(idx, 1)\n      persist()\n    }\n  }\n  return { classes, list, getById, create, update, remove }\n}\n"],"names":["_ssrRenderClass","_ssrRenderAttr","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual"],"mappings":";;;;;;;;;;;;;;;;AAmDA,UAAM,QAAQ;AACd,UAAM,OAAO;AACb,UAAM,QAAQ,SAAqB,EAAE,GAAG,MAAM,YAAY;AAC1D,UAAM,QAAQ,SAAS;AAAA,MACrB,MAAM,SAAS,MAAM,MAAM,KAAK,KAAA,EAAO,SAAS,CAAC;AAAA,IAAA,CAClD;AACD,UAAM,MAAM,MAAM,YAAY,CAAA,MAAK;AACjC,aAAO,OAAO,OAAO,CAAC;AAAA,IACxB,CAAC;AACD,UAAM,OAAO,CAAA,MAAK;AAChB,WAAK,sBAAsB,EAAE,GAAG,GAAG;AAAA,IACrC,GAAG,EAAE,MAAM,MAAM;;gGA3DN,EAAA,eAAA,SAAA,CAA2B,oHAKWA,eAAA,CAAA,EAAA,SAAA,CAAA,MAAM,QAAI,OAAA,CAAA,KAAaC,cAAA,SAAA,MAAM,IAAI;AAChD,UAAA,CAAA,MAAM,MAAI;;;;;wGAIJC,sBAAA,MAAA,QAAA,MAAM,KAAK,IAAXC,gBAAA,MAAM,OAAK,IAAA,IAAXC,cAAA,MAAM,OAAK,IAAA,CAAA,IAAA,cAAA,6BAAXF,sBAAA,MAAA,QAAA,MAAM,KAAK,IAAXC,gBAAA,MAAM,OAAK,IAAA,IAAXC,cAAA,MAAM,OAAK,IAAA,CAAA,IAAA,cAAA,6BAAXF,sBAAA,MAAA,QAAA,MAAM,KAAK,IAAXC,gBAAA,MAAM,OAAK,IAAA,IAAXC,cAAA,MAAM,OAAK,IAAA,CAAA,IAAA,cAAA,6BAAXF,sBAAA,MAAA,QAAA,MAAM,KAAK,IAAXC,gBAAA,MAAM,OAAK,IAAA,IAAXC,cAAA,MAAM,OAAK,IAAA,CAAA,IAAA,cAAA,6BAAXF,sBAAA,MAAA,QAAA,MAAM,KAAK,IAAXC,gBAAA,MAAM,OAAK,IAAA,IAAXC,cAAA,MAAM,OAAK,IAAA,CAAA,IAAA,cAAA,6BAAXF,sBAAA,MAAA,QAAA,MAAM,KAAK,IAAXC,gBAAA,MAAM,OAAK,IAAA,IAAXC,cAAA,MAAM,OAAK,IAAA,CAAA,IAAA,cAAA,gHAWbH,cAAA,SAAA,MAAM,OAAO,8GAIbA,cAAA,SAAA,MAAM,OAAO,iHAIbA,cAAA,SAAA,MAAM,IAAI;;;;;;;;;;ACbhD,SAAS,QAAQ;AACf,SAAO,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,MAAM,CAAC,IAAI,KAAK,MAAM,SAAS,EAAE;AACrE;AAEO,SAAS,aAAa;AAC3B,QAAM,UAAU,SAAwB,WAAW,MAAM,CAAA,CAAE;AACvC,MAAI,KAAK;AAS7B,WAAS,OAAO;AACd,WAAO,QAAQ;AAAA,EACjB;AACA,WAAS,QAAQ,IAAY;AAC3B,WAAO,QAAQ,MAAM,KAAK,CAAA,MAAK,EAAE,OAAO,EAAE;AAAA,EAC5C;AACA,WAAS,OAAO,SAAkC;AAChD,YAAQ,MAAM,KAAK,EAAE,IAAI,SAAS,GAAG,SAAS;AAAA,EAEhD;AACA,WAAS,OAAO,IAAY,SAAkC;AAC5D,UAAM,MAAM,QAAQ,MAAM,UAAU,CAAA,MAAK,EAAE,OAAO,EAAE;AACpD,QAAI,QAAQ,IAAI;AACd,cAAQ,MAAM,GAAG,IAAI,EAAE,IAAI,GAAG,QAAA;AAAA,IAEhC;AAAA,EACF;AACA,WAAS,OAAO,IAAY;AAC1B,UAAM,MAAM,QAAQ,MAAM,UAAU,CAAA,MAAK,EAAE,OAAO,EAAE;AACpD,QAAI,QAAQ,IAAI;AACd,cAAQ,MAAM,OAAO,KAAK,CAAC;AAAA,IAE7B;AAAA,EACF;AACA,SAAO,EAAE,SAAS,MAAM,SAAS,QAAQ,QAAQ,OAAA;AACnD;"}