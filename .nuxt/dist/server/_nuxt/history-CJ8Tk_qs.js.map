{"version":3,"file":"history-CJ8Tk_qs.js","sources":["../../../../pages/attendance/history.vue"],"sourcesContent":["<template>\n  <section class=\"card\">\n    <div class=\"toolbar\">\n      <input class=\"date\" type=\"date\" v-model=\"from\" />\n      <input class=\"date\" type=\"date\" v-model=\"to\" />\n      <input class=\"input\" v-model=\"q\" placeholder=\"Search student name\" />\n      <div class=\"spacer\"></div>\n      <button class=\"btn secondary\" @click=\"clearFilters\">Clear</button>\n    </div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th>Date</th>\n          <th>Student</th>\n          <th>Grade</th>\n          <th>Status</th>\n          <th class=\"actions\">Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"r in filtered\" :key=\"r.id\">\n          <td>{{ formatDate(r.date) }}</td>\n          <td>{{ getStudent(r.studentId)?.name || 'Unknown' }}</td>\n          <td>{{ getStudent(r.studentId)?.grade || '-' }}</td>\n          <td><span class=\"badge\">{{ r.status }}</span></td>\n          <td class=\"actions\">\n            <button class=\"btn danger\" @click=\"remove(r.id)\">Delete</button>\n          </td>\n        </tr>\n        <tr v-if=\"filtered.length === 0\">\n          <td colspan=\"5\" class=\"muted\">No attendance records</td>\n        </tr>\n      </tbody>\n    </table>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { useStudents } from '~/composables/useStudents'\nimport { useAttendance } from '~/composables/useAttendance'\nconst { students } = useStudents()\nconst { records, remove } = useAttendance()\nconst q = ref('')\nconst from = ref('')\nconst to = ref('')\nfunction getStudent(id: string) { return students.value.find(s => s.id === id) }\nconst filtered = computed(() => {\n  const v = q.value.trim().toLowerCase()\n  return records.value.filter(r => {\n    const name = getStudent(r.studentId)?.name.toLowerCase() || ''\n    const dateStr = r.date.slice(0,10)\n    const afterFrom = !from.value || dateStr >= from.value\n    const beforeTo = !to.value || dateStr <= to.value\n    const matchesText = !v || name.includes(v)\n    return afterFrom && beforeTo && matchesText\n  }).sort((a,b) => a.date.localeCompare(b.date))\n})\nfunction clearFilters() { q.value = ''; from.value = ''; to.value = '' }\nfunction formatDate(d: string) { return new Date(d).toLocaleDateString() }\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate"],"mappings":";;;;;;;;;;;;;;;;;;;;AAyCA,UAAM,EAAE,SAAA,IAAa,YAAA;AACrB,UAAM,EAAE,QAAgB,IAAI,cAAA;AAC5B,UAAM,IAAI,IAAI,EAAE;AAChB,UAAM,OAAO,IAAI,EAAE;AACnB,UAAM,KAAK,IAAI,EAAE;AACjB,aAAS,WAAW,IAAY;AAAE,aAAO,SAAS,MAAM,KAAK,CAAA,MAAK,EAAE,OAAO,EAAE;AAAA,IAAE;AAC/E,UAAM,WAAW,SAAS,MAAM;AAC9B,YAAM,IAAI,EAAE,MAAM,KAAA,EAAO,YAAA;AACzB,aAAO,QAAQ,MAAM,OAAO,CAAA,MAAK;AAC/B,cAAM,OAAO,WAAW,EAAE,SAAS,GAAG,KAAK,iBAAiB;AAC5D,cAAM,UAAU,EAAE,KAAK,MAAM,GAAE,EAAE;AACjC,cAAM,YAAY,CAAC,KAAK,SAAS,WAAW,KAAK;AACjD,cAAM,WAAW,CAAC,GAAG,SAAS,WAAW,GAAG;AAC5C,cAAM,cAAc,CAAC,KAAK,KAAK,SAAS,CAAC;AACzC,eAAO,aAAa,YAAY;AAAA,MAClC,CAAC,EAAE,KAAK,CAAC,GAAE,MAAM,EAAE,KAAK,cAAc,EAAE,IAAI,CAAC;AAAA,IAC/C,CAAC;AAED,aAAS,WAAW,GAAW;AAAE,aAAO,IAAI,KAAK,CAAC,EAAE,mBAAA;AAAA,IAAqB;;uBA1D9DA,eAAAC,WAAA,EAAA,OAAM,OAAA,GAAM,MAAA,CAAA,gFAEwB,KAAA,KAAI,2DACJ,GAAA,KAAE,gDACb,EAAA,KAAC;AAebC,oBAAA,SAAA,QAAL,MAAC;wCACH,WAAW,EAAE,IAAI,CAAA,aACjBC,eAAA,WAAW,EAAE,SAAS,GAAG,QAAI,SAAA,aAC7BA,eAAA,WAAW,EAAE,SAAS,GAAG,SAAK,GAAA,iCACVA,eAAA,EAAE,MAAM;;;AAK3B,UAAA,SAAA,MAAS,WAAM,GAAA;;;;;;;;;;;;;;;"}