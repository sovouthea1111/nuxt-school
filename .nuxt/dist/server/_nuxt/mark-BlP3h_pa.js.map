{"version":3,"file":"mark-BlP3h_pa.js","sources":["../../../../pages/attendance/mark.vue"],"sourcesContent":["<template>\n  <section class=\"card\">\n    <div class=\"toolbar\">\n      <input class=\"date\" type=\"date\" v-model=\"date\" />\n      <div class=\"spacer\"></div>\n      <button class=\"btn\" @click=\"markAll('Present')\">Mark All Present</button>\n      <button class=\"btn secondary\" @click=\"markAll('Absent')\">Mark All Absent</button>\n      <button class=\"btn secondary\" @click=\"save\">Save</button>\n    </div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th>Student</th>\n          <th>Grade</th>\n          <th>Status</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in students\" :key=\"s.id\">\n          <td>{{ s.name }}</td>\n          <td><span class=\"badge\">{{ s.grade }}</span></td>\n          <td>\n            <div style=\"display:flex; gap:8px\">\n              <label class=\"chip\" :class=\"{ active: getStatus(s.id) === 'Present' }\">\n                <input type=\"radio\" :name=\"`st-${s.id}`\" value=\"Present\" v-model=\"selected[s.id]\" /> Present\n              </label>\n              <label class=\"chip\" :class=\"{ active: getStatus(s.id) === 'Absent' }\">\n                <input type=\"radio\" :name=\"`st-${s.id}`\" value=\"Absent\" v-model=\"selected[s.id]\" /> Absent\n              </label>\n              <label class=\"chip\" :class=\"{ active: getStatus(s.id) === 'Late' }\">\n                <input type=\"radio\" :name=\"`st-${s.id}`\" value=\"Late\" v-model=\"selected[s.id]\" /> Late\n              </label>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue'\nimport { useStudents } from '~/composables/useStudents'\nimport { useAttendance } from '~/composables/useAttendance'\nconst { students } = useStudents()\nconst { bulkMark } = useAttendance()\nconst date = ref(new Date().toISOString().slice(0,10))\nconst selected = reactive<Record<string, 'Present' | 'Absent' | 'Late'>>({})\nfunction markAll(status: 'Present' | 'Absent' | 'Late') {\n  students.value.forEach(s => { selected[s.id] = status })\n}\nfunction getStatus(id: string) { return selected[id] || 'Present' }\nfunction save() {\n  const entries = students.value.map(s => ({ studentId: s.id, status: getStatus(s.id) }))\n  bulkMark(date.value, entries)\n}\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_unref","_ssrInterpolate"],"mappings":";;;;;;;;;;;;;;;;;;;;AA4CA,UAAM,EAAE,SAAA,IAAa,YAAA;AACA,kBAAA;AACrB,UAAM,OAAO,KAAI,oBAAI,KAAA,GAAO,cAAc,MAAM,GAAE,EAAE,CAAC;AACrD,UAAM,WAAW,SAAwD,EAAE;AAI3E,aAAS,UAAU,IAAY;AAAE,aAAO,SAAS,EAAE,KAAK;AAAA,IAAU;;uBAlDvDA,eAAAC,WAAA,EAAA,OAAM,UAAM,MAAA,CAAA,gFAEwB,KAAA,KAAI;AAe3BC,oBAAAC,MAAA,QAAA,IAAL,MAAC;yBACHC,eAAA,EAAE,IAAI,iCACcA,eAAA,EAAE,KAAK,+CAE3B,EAAA,WAAA,QAAA,OAAA,MAAA,CAA6B,8CACM,UAAU,EAAE,EAAE,MAAA,aAAA,MAAA,CAAA,uCAC7B,QAAI,MAAQ,EAAE,EAAE,EAAA,wDAA6B,SAAS,EAAE,EAAE,GAAA,SAAA,CAAA,IAAA,aAAA,+DAE3C,UAAU,EAAE,EAAE,MAAA,SAAA,GAAA,MAAA,CAAA,uCAC7B,QAAI,MAAQ,EAAE,EAAE,EAAA,uDAA4B,SAAS,EAAE,EAAE,GAAA,QAAA,CAAA,IAAA,aAAA,8DAE1C,UAAU,EAAE,EAAE,MAAA,OAAA,GAAA,MAAA,CAAA,uCAC7B,QAAI,MAAQ,EAAE,EAAE,EAAA,qDAA0B,SAAS,EAAE,EAAE,GAAA,MAAA,CAAA,IAAA,aAAA;;;;;;;;;;;;"}