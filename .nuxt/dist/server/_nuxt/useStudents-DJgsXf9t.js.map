{"version":3,"file":"useStudents-DJgsXf9t.js","sources":["../../../../composables/useStudents.ts"],"sourcesContent":["import { ref } from 'vue'\nimport { useState } from 'nuxt/app'\n\ntype Student = {\n  id: string\n  name: string\n  gender: string\n  grade: string\n  age: number\n  guardian: string\n  enrollmentDate: string\n  address: string\n}\n\nfunction sampleSeed(): Student[] {\n  return [\n    { id: genId(), name: 'Sophea Chan', gender: 'Female', grade: 'Grade 3', age: 9, guardian: 'Chan Dara', enrollmentDate: new Date('2023-10-01').toISOString(), address: 'Phnom Penh' },\n    { id: genId(), name: 'Vannak Sok', gender: 'Male', grade: 'Grade 2', age: 8, guardian: 'Sok Lina', enrollmentDate: new Date('2024-01-15').toISOString(), address: 'Siem Reap' },\n    { id: genId(), name: 'Sreyneang Kim', gender: 'Female', grade: 'Grade 1', age: 7, guardian: 'Kim Phalla', enrollmentDate: new Date('2024-05-20').toISOString(), address: 'Battambang' }\n  ]\n}\n\nfunction genId() {\n  return Math.random().toString(36).slice(2) + Date.now().toString(36)\n}\n\nexport function useStudents() {\n  const students = useState<Student[]>('students', () => [])\n  const initialized = ref(false)\n  if (process.client && !initialized.value) {\n    const raw = localStorage.getItem('students')\n    students.value = raw ? JSON.parse(raw) as Student[] : sampleSeed()\n    initialized.value = true\n  }\n  function persist() {\n    if (process.client) localStorage.setItem('students', JSON.stringify(students.value))\n  }\n  function list() {\n    return students.value\n  }\n  function getById(id: string) {\n    return students.value.find(s => s.id === id)\n  }\n  function create(payload: Omit<Student, 'id'>) {\n    students.value.push({ id: genId(), ...payload, enrollmentDate: new Date(payload.enrollmentDate).toISOString() })\n    persist()\n  }\n  function update(id: string, payload: Omit<Student, 'id'>) {\n    const idx = students.value.findIndex(s => s.id === id)\n    if (idx !== -1) {\n      students.value[idx] = { id, ...payload, enrollmentDate: new Date(payload.enrollmentDate).toISOString() }\n      persist()\n    }\n  }\n  function remove(id: string) {\n    const idx = students.value.findIndex(s => s.id === id)\n    if (idx !== -1) {\n      students.value.splice(idx, 1)\n      persist()\n    }\n  }\n  return { students, list, getById, create, update, remove }\n}\n"],"names":[],"mappings":";;;;;;;AAsBA,SAAS,QAAQ;AACf,SAAO,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,MAAM,CAAC,IAAI,KAAK,MAAM,SAAS,EAAE;AACrE;AAEO,SAAS,cAAc;AAC5B,QAAM,WAAW,SAAoB,YAAY,MAAM,CAAA,CAAE;AACrC,MAAI,KAAK;AAS7B,WAAS,OAAO;AACd,WAAO,SAAS;AAAA,EAClB;AACA,WAAS,QAAQ,IAAY;AAC3B,WAAO,SAAS,MAAM,KAAK,CAAA,MAAK,EAAE,OAAO,EAAE;AAAA,EAC7C;AACA,WAAS,OAAO,SAA8B;AAC5C,aAAS,MAAM,KAAK,EAAE,IAAI,MAAA,GAAS,GAAG,SAAS,gBAAgB,IAAI,KAAK,QAAQ,cAAc,EAAE,YAAA,GAAe;AAAA,EAEjH;AACA,WAAS,OAAO,IAAY,SAA8B;AACxD,UAAM,MAAM,SAAS,MAAM,UAAU,CAAA,MAAK,EAAE,OAAO,EAAE;AACrD,QAAI,QAAQ,IAAI;AACd,eAAS,MAAM,GAAG,IAAI,EAAE,IAAI,GAAG,SAAS,gBAAgB,IAAI,KAAK,QAAQ,cAAc,EAAE,cAAY;AAAA,IAEvG;AAAA,EACF;AACA,WAAS,OAAO,IAAY;AAC1B,UAAM,MAAM,SAAS,MAAM,UAAU,CAAA,MAAK,EAAE,OAAO,EAAE;AACrD,QAAI,QAAQ,IAAI;AACd,eAAS,MAAM,OAAO,KAAK,CAAC;AAAA,IAE9B;AAAA,EACF;AACA,SAAO,EAAE,UAAU,MAAM,SAAS,QAAQ,QAAQ,OAAA;AACpD;"}