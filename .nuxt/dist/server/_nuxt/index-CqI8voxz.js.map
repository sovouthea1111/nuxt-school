{"version":3,"file":"index-CqI8voxz.js","sources":["../../../../pages/subjects/index.vue"],"sourcesContent":["<template>\n  <section class=\"card\">\n    <div class=\"toolbar\">\n      <input v-model=\"q\" class=\"input\" placeholder=\"Search name, code or teacher\" />\n      <div class=\"spacer\"></div>\n      <button class=\"btn\" @click=\"openCreate\">Add Subject</button>\n    </div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Code</th>\n          <th>Teacher</th>\n          <th>Description</th>\n          <th class=\"actions\">Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in filtered\" :key=\"s.id\">\n          <td>{{ s.name }}</td>\n          <td><span class=\"badge\">{{ s.code }}</span></td>\n          <td>{{ s.teacher }}</td>\n          <td>{{ s.description }}</td>\n          <td class=\"actions\">\n            <button class=\"btn secondary\" @click=\"openEdit(s.id)\">Edit</button>\n            <button class=\"btn danger\" @click=\"handleDelete(s.id)\">Delete</button>\n          </td>\n        </tr>\n        <tr v-if=\"filtered.length === 0\">\n          <td colspan=\"5\" class=\"muted\">No subjects found</td>\n        </tr>\n      </tbody>\n    </table>\n    <Popup :open=\"showCreate\" title=\"Add Subject\" @close=\"closeModal\">\n      <SubjectForm :model-value=\"createModel\" @update:model-value=\"onUpdateCreate\" @submit=\"handleCreate\" @cancel=\"closeModal\" />\n    </Popup>\n    <Popup :open=\"showEdit\" title=\"Edit Subject\" @close=\"closeModal\">\n      <SubjectForm :model-value=\"editModel\" @update:model-value=\"onUpdateEdit\" @submit=\"handleUpdate\" @cancel=\"closeModal\" />\n    </Popup>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, reactive } from 'vue'\nimport Popup from '~/components/Popup.vue'\nimport SubjectForm from '~/components/SubjectForm.vue'\nimport { useSubjects } from '~/composables/useSubjects'\nconst { subjects, create, update, remove, getById } = useSubjects()\nconst q = ref('')\nconst filtered = computed(() => {\n  const v = q.value.trim().toLowerCase()\n  return subjects.value.filter(s => {\n    const text = `${s.name} ${s.code} ${s.teacher} ${s.description}`.toLowerCase()\n    return !v || text.includes(v)\n  })\n})\ntype SubjectModel = {\n  name: string\n  code: string\n  description: string\n  teacher: string\n}\nconst showCreate = ref(false)\nconst showEdit = ref(false)\nconst editId = ref<string | null>(null)\nlet createModel = reactive<SubjectModel>({\n  name: '',\n  code: 'SUBJ',\n  description: '',\n  teacher: ''\n})\nlet editModel = reactive<SubjectModel>({\n  name: '',\n  code: 'SUBJ',\n  description: '',\n  teacher: ''\n})\nfunction openCreate() {\n  showCreate.value = true\n}\nfunction openEdit(id: string) {\n  const s = getById(id)\n  if (!s) return\n  editId.value = id\n  editModel.name = s.name\n  editModel.code = s.code\n  editModel.description = s.description\n  editModel.teacher = s.teacher\n  showEdit.value = true\n}\nfunction closeModal() {\n  showCreate.value = false\n  showEdit.value = false\n}\nfunction onUpdateCreate(v: SubjectModel) {\n  Object.assign(createModel, v)\n}\nfunction onUpdateEdit(v: SubjectModel) {\n  Object.assign(editModel, v)\n}\nfunction handleCreate() {\n  create({ ...createModel })\n  closeModal()\n}\nfunction handleUpdate() {\n  if (!editId.value) return\n  update(editId.value, { ...editModel })\n  closeModal()\n}\nfunction handleDelete(id: string) {\n  remove(id)\n}\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate","_push","_parent","_unref","_createVNode","SubjectForm"],"mappings":";;;;;;;;;;;;;;;;;;;;AA+CA,UAAM,EAAE,UAAU,QAAQ,OAAwB,IAAI,YAAA;AACtD,UAAM,IAAI,IAAI,EAAE;AAChB,UAAM,WAAW,SAAS,MAAM;AAC9B,YAAM,IAAI,EAAE,MAAM,KAAA,EAAO,YAAA;AACzB,aAAO,SAAS,MAAM,OAAO,CAAA,MAAK;AAChC,cAAM,OAAO,GAAG,EAAE,IAAI,IAAI,EAAE,IAAI,IAAI,EAAE,OAAO,IAAI,EAAE,WAAW,GAAG,YAAA;AACjE,eAAO,CAAC,KAAK,KAAK,SAAS,CAAC;AAAA,MAC9B,CAAC;AAAA,IACH,CAAC;AAOD,UAAM,aAAa,IAAI,KAAK;AAC5B,UAAM,WAAW,IAAI,KAAK;AAC1B,UAAM,SAAS,IAAmB,IAAI;AACtC,QAAI,cAAc,SAAuB;AAAA,MACvC,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,SAAS;AAAA,IAAA,CACV;AACD,QAAI,YAAY,SAAuB;AAAA,MACrC,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,SAAS;AAAA,IAAA,CACV;AAcD,aAAS,aAAa;AACpB,iBAAW,QAAQ;AACnB,eAAS,QAAQ;AAAA,IACnB;AACA,aAAS,eAAe,GAAiB;AACvC,aAAO,OAAO,aAAa,CAAC;AAAA,IAC9B;AACA,aAAS,aAAa,GAAiB;AACrC,aAAO,OAAO,WAAW,CAAC;AAAA,IAC5B;AACA,aAAS,eAAe;AACtB,aAAO,EAAE,GAAG,aAAa;AACzB,iBAAA;AAAA,IACF;AACA,aAAS,eAAe;AACtB,UAAI,CAAC,OAAO,MAAO;AACnB,aAAO,OAAO,OAAO,EAAE,GAAG,WAAW;AACrC,iBAAA;AAAA,IACF;;uBA3GWA,eAAAC,WAAA,EAAA,OAAM,UAAM,MAAA,CAAA,uDAED,EAAA,KAAC;AAeCC,oBAAA,SAAA,QAAL,MAAC;yBACHC,eAAA,EAAE,IAAI,iCACcA,eAAA,EAAE,IAAI,oBAC1BA,eAAA,EAAE,OAAO,aACTA,eAAA,EAAE,WAAW;;;AAMZ,UAAA,SAAA,MAAS,WAAM,GAAA;;;;;;;QAKrB,MAAM,WAAA;AAAA,QAAY,OAAM;AAAA,QAAe,SAAO;AAAA,MAAA;yBAAtD,CAEQ,GAAAC,QAAAC,UAAA,aAAA;;;cADQ,eAAaC,MAAA,WAAA;AAAA,cAAc,uBAAoB;AAAA,cAAiB,UAAQ;AAAA,cAAe,UAAQ;AAAA,YAAA;;;cAA7GC,YAA2HC,aAAA;AAAA,gBAA7G,eAAaF,MAAA,WAAA;AAAA,gBAAc,uBAAoB;AAAA,gBAAiB,UAAQ;AAAA,gBAAe,UAAQ;AAAA,cAAA;;;;;;;QAEvG,MAAM,SAAA;AAAA,QAAU,OAAM;AAAA,QAAgB,SAAO;AAAA,MAAA;yBAArD,CAEQ,GAAAF,QAAAC,UAAA,aAAA;;;cADQ,eAAaC,MAAA,SAAA;AAAA,cAAY,uBAAoB;AAAA,cAAe,UAAQ;AAAA,cAAe,UAAQ;AAAA,YAAA;;;cAAzGC,YAAuHC,aAAA;AAAA,gBAAzG,eAAaF,MAAA,SAAA;AAAA,gBAAY,uBAAoB;AAAA,gBAAe,UAAQ;AAAA,gBAAe,UAAQ;AAAA,cAAA;;;;;;;;;;;;;;;;"}